(()=>{var e,t={6434:(e,t,r)=>{"use strict";e=r.nmd(e);const n=(e=0)=>t=>`[${38+e};5;${t}m`,i=(e=0)=>(t,r,n)=>`[${38+e};2;${t};${r};${n}m`;Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[r,n]of Object.entries(t)){for(const[r,i]of Object.entries(n))t[r]={open:`[${i[0]}m`,close:`[${i[1]}m`},n[r]=t[r],e.set(i[0],i[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",t.color.ansi256=n(),t.color.ansi16m=i(),t.bgColor.ansi256=n(10),t.bgColor.ansi16m=i(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:r}=t.groups;3===r.length&&(r=r.split("").map((e=>e+e)).join(""));const n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},9669:(e,t,r)=>{e.exports=r(1609)},5448:(e,t,r)=>{"use strict";var n=r(4867),i=r(6026),a=r(4372),s=r(5327),o=r(4097),c=r(4109),l=r(7985),u=r(5061),d=r(7874),h=r(5263);e.exports=function(e){return new Promise((function(t,r){var p,f=e.data,m=e.headers,g=e.responseType;function b(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}n.isFormData(f)&&delete m["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(w+":"+v)}var _=o(e.baseURL,e.url);function A(){if(y){var n="getAllResponseHeaders"in y?c(y.getAllResponseHeaders()):null,a={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:n,config:e,request:y};i((function(e){t(e),b()}),(function(e){r(e),b()}),a),y=null}}if(y.open(e.method.toUpperCase(),s(_,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=A:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(A)},y.onabort=function(){y&&(r(u("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){r(u("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||d;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(u(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},n.isStandardBrowserEnv()){var O=(e.withCredentials||l(_))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;O&&(m[e.xsrfHeaderName]=O)}"setRequestHeader"in y&&n.forEach(m,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:y.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),g&&"json"!==g&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){y&&(r(!e||e&&e.type?new h("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),y.send(f)}))}},1609:(e,t,r)=>{"use strict";var n=r(4867),i=r(1849),a=r(321),s=r(7185),o=function e(t){var r=new a(t),o=i(a.prototype.request,r);return n.extend(o,a.prototype,r),n.extend(o,r),o.create=function(r){return e(s(t,r))},o}(r(5546));o.Axios=a,o.Cancel=r(5263),o.CancelToken=r(4972),o.isCancel=r(6502),o.VERSION=r(7288).version,o.all=function(e){return Promise.all(e)},o.spread=r(8713),o.isAxiosError=r(6268),e.exports=o,e.exports.default=o},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,r)=>{"use strict";var n=r(5263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,r)=>{"use strict";var n=r(4867),i=r(5327),a=r(782),s=r(3572),o=r(7185),c=r(4875),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new a,response:new a}}u.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=o(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&c.assertOptions(r,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var a,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!i){var d=[s,void 0];for(Array.prototype.unshift.apply(d,n),d=d.concat(u),a=Promise.resolve(t);d.length;)a=a.then(d.shift(),d.shift());return a}for(var h=t;n.length;){var p=n.shift(),f=n.shift();try{h=p(h)}catch(e){f(e);break}}try{a=s(h)}catch(e){return Promise.reject(e)}for(;u.length;)a=a.then(u.shift(),u.shift());return a},u.prototype.getUri=function(e){return e=o(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,r){return this.request(o(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,r,n){return this.request(o(n||{},{method:e,url:t,data:r}))}})),e.exports=u},782:(e,t,r)=>{"use strict";var n=r(4867);function i(){this.handlers=[]}i.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},4097:(e,t,r)=>{"use strict";var n=r(1793),i=r(7303);e.exports=function(e,t){return e&&!n(t)?i(e,t):t}},5061:(e,t,r)=>{"use strict";var n=r(481);e.exports=function(e,t,r,i,a){var s=new Error(e);return n(s,t,r,i,a)}},3572:(e,t,r)=>{"use strict";var n=r(4867),i=r(8527),a=r(6502),s=r(5546),o=r(5263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},7185:(e,t,r)=>{"use strict";var n=r(4867);e.exports=function(e,t){t=t||{};var r={};function i(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function a(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:i(void 0,e[r]):i(e[r],t[r])}function s(e){if(!n.isUndefined(t[e]))return i(void 0,t[e])}function o(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:i(void 0,e[r]):i(void 0,t[r])}function c(r){return r in t?i(e[r],t[r]):r in e?i(void 0,e[r]):void 0}var l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||a,i=t(e);n.isUndefined(i)&&t!==c||(r[e]=i)})),r}},6026:(e,t,r)=>{"use strict";var n=r(5061);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},8527:(e,t,r)=>{"use strict";var n=r(4867),i=r(5546);e.exports=function(e,t,r){var a=this||i;return n.forEach(r,(function(r){e=r.call(a,e,t)})),e}},5546:(e,t,r)=>{"use strict";var n=r(4867),i=r(6016),a=r(481),s=r(7874),o={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,u={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=r(5448)),l),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,r=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!r&&"json"===this.responseType;if(s||i&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw a(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){u.headers[e]=n.merge(o)})),e.exports=u},7874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:e=>{e.exports={version:"0.26.1"}},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},5327:(e,t,r)=>{"use strict";var n=r(4867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var a;if(r)a=r(t);else if(n.isURLSearchParams(t))a=t.toString();else{var s=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),a=s.join("&")}if(a){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,r)=>{"use strict";var n=r(4867);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,a,s){var o=[];o.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),n.isString(i)&&o.push("path="+i),n.isString(a)&&o.push("domain="+a),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},6268:(e,t,r)=>{"use strict";var n=r(4867);e.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}},7985:(e,t,r)=>{"use strict";var n=r(4867);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},6016:(e,t,r)=>{"use strict";var n=r(4867);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},4109:(e,t,r)=>{"use strict";var n=r(4867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,a,s={};return e?(n.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),r=n.trim(e.substr(a+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}})),s):s}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4875:(e,t,r)=>{"use strict";var n=r(7288).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var a={};i.transitional=function(e,t,r){function i(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,s){if(!1===e)throw new Error(i(n," has been removed"+(t?" in "+t:"")));return t&&!a[n]&&(a[n]=!0,console.warn(i(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,s)}},e.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var a=n[i],s=t[a];if(s){var o=e[a],c=void 0===o||s(o,a,e);if(!0!==c)throw new TypeError("option "+a+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+a)}},validators:i}},4867:(e,t,r)=>{"use strict";var n=r(1849),i=Object.prototype.toString;function a(e){return Array.isArray(e)}function s(e){return void 0===e}function o(e){return"[object ArrayBuffer]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:o,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&o(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return c(e)&&u(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function r(r,n){l(t[n])&&l(r)?t[n]=e(t[n],r):l(r)?t[n]=e({},r):a(r)?t[n]=r.slice():t[n]=r}for(var n=0,i=arguments.length;n<i;n++)d(arguments[n],r);return t},extend:function(e,t,r){return d(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=o(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,a=o(e),s=a[0],c=a[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,c)),u=0,d=c>0?s-4:s;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===c&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],s=16383,o=0,l=n-i;o<l;o+=s)a.push(c(e,o,o+s>l?l:o+s));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=a[s],n[a.charCodeAt(s)]=s;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,a,s=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3204:e=>{"use strict";const t=/[\p{Lu}]/u,r=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,i=/([\p{Alpha}\p{N}_]|$)/u,a=/[_.\- ]+/,s=new RegExp("^"+a.source),o=new RegExp(a.source+i.source,"gu"),c=new RegExp("\\d+"+i.source,"gu"),l=(e,i)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(i={pascalCase:!1,preserveConsecutiveUppercase:!1,...i},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const a=!1===i.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(i.locale),l=!1===i.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(i.locale);return 1===e.length?i.pascalCase?l(e):a(e):(e!==a(e)&&(e=((e,n,i)=>{let a=!1,s=!1,o=!1;for(let c=0;c<e.length;c++){const l=e[c];a&&t.test(l)?(e=e.slice(0,c)+"-"+e.slice(c),a=!1,o=s,s=!0,c++):s&&o&&r.test(l)?(e=e.slice(0,c-1)+"-"+e.slice(c-1),o=s,s=!1,a=!0):(a=n(l)===l&&i(l)!==l,o=s,s=i(l)===l&&n(l)!==l)}return e})(e,a,l)),e=e.replace(s,""),e=i.preserveConsecutiveUppercase?((e,t)=>(n.lastIndex=0,e.replace(n,(e=>t(e)))))(e,a):a(e),i.pascalCase&&(e=l(e.charAt(0))+e.slice(1)),((e,t)=>(o.lastIndex=0,c.lastIndex=0,e.replace(o,((e,r)=>t(r))).replace(c,(e=>t(e)))))(e,l))};e.exports=l,e.exports.default=l},2466:e=>{"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");return t=void 0===t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,a||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var c,l,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,a),!0;case 6:return u.fn.call(u.context,t,n,i,a,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);l.length?this._events[a]=1===l.length?l[0]:l:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},705:e=>{e.exports=function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}o=r[s]={exports:{}},t[s][0].call(o.exports,(function(e){return i(t[s][1][e]||e)}),o,o.exports,e,t,r,n)}return r[s].exports}for(var a=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){(function(n,i,a,s,o,c,l,u,d){"use strict";var h=e("crypto");function p(e,t){var r;return void 0===(r="passthrough"!==(t=g(e,t)).algorithm?h.createHash(t.algorithm):new w).write&&(r.write=r.update,r.end=r.update),y(t,r).dispatch(e),r.update||r.end(""),r.digest?r.digest("buffer"===t.encoding?void 0:t.encoding):(e=r.read(),"buffer"!==t.encoding?e.toString(t.encoding):e)}(r=t.exports=p).sha1=function(e){return p(e)},r.keys=function(e){return p(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(e){return p(e,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(e){return p(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var f=h.getHashes?h.getHashes().slice():["sha1","md5"],m=(f.push("passthrough"),["buffer","hex","binary","base64"]);function g(e,t){var r={};if(r.algorithm=(t=t||{}).algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=!0===t.ignoreUnknown,r.respectType=!1!==t.respectType,r.respectFunctionNames=!1!==t.respectFunctionNames,r.respectFunctionProperties=!1!==t.respectFunctionProperties,r.unorderedArrays=!0===t.unorderedArrays,r.unorderedSets=!1!==t.unorderedSets,r.unorderedObjects=!1!==t.unorderedObjects,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var n=0;n<f.length;++n)f[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=f[n]);if(-1===f.indexOf(r.algorithm))throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+f.join(", "));if(-1===m.indexOf(r.encoding)&&"passthrough"!==r.algorithm)throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+m.join(", "));return r}function b(e){if("function"==typeof e)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function y(e,t,r){function n(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")}return r=r||[],{dispatch:function(t){return this["_"+(null===(t=e.replacer?e.replacer(t):t)?"null":typeof t)](t)},_object:function(t){var i,s=Object.prototype.toString.call(t),o=/\[object (.*)\]/i.exec(s);if(o=(o=o?o[1]:"unknown:["+s+"]").toLowerCase(),0<=(s=r.indexOf(t)))return this.dispatch("[CIRCULAR:"+s+"]");if(r.push(t),void 0!==a&&a.isBuffer&&a.isBuffer(t))return n("buffer:"),n(t);if("object"===o||"function"===o||"asyncfunction"===o)return s=Object.keys(t),e.unorderedObjects&&(s=s.sort()),!1===e.respectType||b(t)||s.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(s=s.filter((function(t){return!e.excludeKeys(t)}))),n("object:"+s.length+":"),i=this,s.forEach((function(r){i.dispatch(r),n(":"),e.excludeValues||i.dispatch(t[r]),n(",")}));if(!this["_"+o]){if(e.ignoreUnknown)return n("["+o+"]");throw new Error('Unknown object type "'+o+'"')}this["_"+o](t)},_array:function(t,i){i=void 0!==i?i:!1!==e.unorderedArrays;var a=this;if(n("array:"+t.length+":"),!i||t.length<=1)return t.forEach((function(e){return a.dispatch(e)}));var s=[];return i=t.map((function(t){var n=new w,i=r.slice();return y(e,n,i).dispatch(t),s=s.concat(i.slice(r.length)),n.read().toString()})),r=r.concat(s),i.sort(),this._array(i,!1)},_date:function(e){return n("date:"+e.toJSON())},_symbol:function(e){return n("symbol:"+e.toString())},_error:function(e){return n("error:"+e.toString())},_boolean:function(e){return n("bool:"+e.toString())},_string:function(e){n("string:"+e.length+":"),n(e.toString())},_function:function(t){n("fn:"),b(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return n("number:"+e.toString())},_xml:function(e){return n("xml:"+e.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(e){return n("regex:"+e.toString())},_uint8array:function(e){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return n("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return n("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return n("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return n("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return n("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return n("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return n("url:"+e.toString())},_map:function(t){return n("map:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_set:function(t){return n("set:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_file:function(e){return n("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return n("domwindow")},_bigint:function(e){return n("bigint:"+e.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function w(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}r.writeToStream=function(e,t,r){return void 0===r&&(r=t,t={}),y(t=g(e,t),r).dispatch(e)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(e,t,r){(function(e,t,n,i,a,s,o,c,l){!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),n="/".charCodeAt(0),i="0".charCodeAt(0),a="a".charCodeAt(0),s="A".charCodeAt(0),o="-".charCodeAt(0),c="_".charCodeAt(0);function l(e){return(e=e.charCodeAt(0))===r||e===o?62:e===n||e===c?63:e<i?-1:e<i+10?e-i+26+26:e<s+26?e-s:e<a+26?e-a+26:void 0}e.toByteArray=function(e){var r,n;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.length,a=(i="="===e.charAt(i-2)?2:"="===e.charAt(i-1)?1:0,new t(3*e.length/4-i)),s=0<i?e.length-4:e.length,o=0;function c(e){a[o++]=e}for(r=0;r<s;r+=4,0)c((16711680&(n=l(e.charAt(r))<<18|l(e.charAt(r+1))<<12|l(e.charAt(r+2))<<6|l(e.charAt(r+3))))>>16),c((65280&n)>>8),c(255&n);return 2==i?c(255&(n=l(e.charAt(r))<<2|l(e.charAt(r+1))>>4)):1==i&&(c((n=l(e.charAt(r))<<10|l(e.charAt(r+1))<<4|l(e.charAt(r+2))>>2)>>8&255),c(255&n)),a},e.fromByteArray=function(e){var t,r,n,i,a=e.length%3,s="";function o(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,n=e.length-a;t<n;t+=3)s+=o((i=r=(e[t]<<16)+(e[t+1]<<8)+e[t+2])>>18&63)+o(i>>12&63)+o(i>>6&63)+o(63&i);switch(a){case 1:s=(s+=o((r=e[e.length-1])>>2))+o(r<<4&63)+"==";break;case 2:s=(s=(s+=o((r=(e[e.length-2]<<8)+e[e.length-1])>>10))+o(r>>4&63))+o(r<<2&63)+"="}return s}}(void 0===r?this.base64js={}:r)}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(e,t,r){(function(t,n,i,a,s,o,c,l,u){var d=e("base64-js"),h=e("ieee754");function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);var n,a,s,o,c=typeof e;if("base64"===t&&"string"==c)for(e=(o=e).trim?o.trim():o.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if("number"==c)n=j(e);else if("string"==c)n=i.byteLength(e,t);else{if("object"!=c)throw new Error("First argument needs to be a number, array or string.");n=j(e.length)}if(i._useTypedArrays?a=i._augment(new Uint8Array(n)):((a=this).length=n,a._isBuffer=!0),i._useTypedArrays&&"number"==typeof e.byteLength)a._set(e);else if(x(o=e)||i.isBuffer(o)||o&&"object"==typeof o&&"number"==typeof o.length)for(s=0;s<n;s++)i.isBuffer(e)?a[s]=e.readUInt8(s):a[s]=e[s];else if("string"==c)a.write(e,0,t);else if("number"==c&&!i._useTypedArrays&&!r)for(s=0;s<n;s++)a[s]=0;return a}function p(e,t,r,n){var i;if(n||(U("boolean"==typeof r,"missing or invalid endian"),U(null!=t,"missing offset"),U(t+1<e.length,"Trying to read beyond buffer length")),!((n=e.length)<=t))return r?(i=e[t],t+1<n&&(i|=e[t+1]<<8)):(i=e[t]<<8,t+1<n&&(i|=e[t+1])),i}function f(e,t,r,n){var i;if(n||(U("boolean"==typeof r,"missing or invalid endian"),U(null!=t,"missing offset"),U(t+3<e.length,"Trying to read beyond buffer length")),!((n=e.length)<=t))return r?(t+2<n&&(i=e[t+2]<<16),t+1<n&&(i|=e[t+1]<<8),i|=e[t],t+3<n&&(i+=e[t+3]<<24>>>0)):(t+1<n&&(i=e[t+1]<<16),t+2<n&&(i|=e[t+2]<<8),t+3<n&&(i|=e[t+3]),i+=e[t]<<24>>>0),i}function m(e,t,r,n){if(n||(U("boolean"==typeof r,"missing or invalid endian"),U(null!=t,"missing offset"),U(t+1<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 32768&(n=p(e,t,r,!0))?-1*(65535-n+1):n}function g(e,t,r,n){if(n||(U("boolean"==typeof r,"missing or invalid endian"),U(null!=t,"missing offset"),U(t+3<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 2147483648&(n=f(e,t,r,!0))?-1*(4294967295-n+1):n}function b(e,t,r,n){return n||(U("boolean"==typeof r,"missing or invalid endian"),U(t+3<e.length,"Trying to read beyond buffer length")),h.read(e,t,r,23,4)}function y(e,t,r,n){return n||(U("boolean"==typeof r,"missing or invalid endian"),U(t+7<e.length,"Trying to read beyond buffer length")),h.read(e,t,r,52,8)}function w(e,t,r,n,i){if(i||(U(null!=t,"missing value"),U("boolean"==typeof n,"missing or invalid endian"),U(null!=r,"missing offset"),U(r+1<e.length,"trying to write beyond buffer length"),L(t,65535)),!((i=e.length)<=r))for(var a=0,s=Math.min(i-r,2);a<s;a++)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function v(e,t,r,n,i){if(i||(U(null!=t,"missing value"),U("boolean"==typeof n,"missing or invalid endian"),U(null!=r,"missing offset"),U(r+3<e.length,"trying to write beyond buffer length"),L(t,4294967295)),!((i=e.length)<=r))for(var a=0,s=Math.min(i-r,4);a<s;a++)e[r+a]=t>>>8*(n?a:3-a)&255}function _(e,t,r,n,i){i||(U(null!=t,"missing value"),U("boolean"==typeof n,"missing or invalid endian"),U(null!=r,"missing offset"),U(r+1<e.length,"Trying to write beyond buffer length"),N(t,32767,-32768)),e.length<=r||w(e,0<=t?t:65535+t+1,r,n,i)}function A(e,t,r,n,i){i||(U(null!=t,"missing value"),U("boolean"==typeof n,"missing or invalid endian"),U(null!=r,"missing offset"),U(r+3<e.length,"Trying to write beyond buffer length"),N(t,2147483647,-2147483648)),e.length<=r||v(e,0<=t?t:4294967295+t+1,r,n,i)}function O(e,t,r,n,i){i||(U(null!=t,"missing value"),U("boolean"==typeof n,"missing or invalid endian"),U(null!=r,"missing offset"),U(r+3<e.length,"Trying to write beyond buffer length"),M(t,34028234663852886e22,-34028234663852886e22)),e.length<=r||h.write(e,t,r,n,23,4)}function E(e,t,r,n,i){i||(U(null!=t,"missing value"),U("boolean"==typeof n,"missing or invalid endian"),U(null!=r,"missing offset"),U(r+7<e.length,"Trying to write beyond buffer length"),M(t,17976931348623157e292,-17976931348623157e292)),e.length<=r||h.write(e,t,r,n,52,8)}r.Buffer=i,r.SlowBuffer=i,r.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(e){return!1}}(),i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=S(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=C(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},i.concat=function(e,t){if(U(x(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new i(0);if(1===e.length)return e[0];if("number"!=typeof t)for(a=t=0;a<e.length;a++)t+=e[a].length;for(var r=new i(t),n=0,a=0;a<e.length;a++){var s=e[a];s.copy(r,n),n+=s.length}return r},i.prototype.write=function(e,t,r,n){isFinite(t)?isFinite(r)||(n=r,r=void 0):(l=n,n=t,t=r,r=l),t=Number(t)||0;var a,s,o,c,l=this.length-t;switch((!r||l<(r=Number(r)))&&(r=l),n=String(n||"utf8").toLowerCase()){case"hex":a=function(e,t,r,n){r=Number(r)||0;var a=e.length-r;(!n||a<(n=Number(n)))&&(n=a),U((a=t.length)%2==0,"Invalid hex string"),a/2<n&&(n=a/2);for(var s=0;s<n;s++){var o=parseInt(t.substr(2*s,2),16);U(!isNaN(o),"Invalid hex string"),e[r+s]=o}return i._charsWritten=2*s,s}(this,e,t,r);break;case"utf8":case"utf-8":s=this,o=t,c=r,a=i._charsWritten=R(S(e),s,o,c);break;case"ascii":case"binary":a=function(e,t,r,n){return i._charsWritten=R(function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}(this,e,t,r);break;case"base64":s=this,o=t,c=r,a=i._charsWritten=R(C(e),s,o,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=function(e,t,r,n){return i._charsWritten=R(function(e){for(var t,r,n=[],i=0;i<e.length;i++)t=(r=e.charCodeAt(i))>>8,r%=256,n.push(r),n.push(t);return n}(t),e,r,n)}(this,e,t,r);break;default:throw new Error("Unknown encoding")}return a},i.prototype.toString=function(e,t,r){var n,i,a,s,o=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,(r=void 0!==r?Number(r):o.length)===t)return"";switch(e){case"hex":n=function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||n<r)&&(r=n);for(var i="",a=t;a<r;a++)i+=T(e[a]);return i}(o,t,r);break;case"utf8":case"utf-8":n=function(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var a=t;a<r;a++)e[a]<=127?(n+=k(i)+String.fromCharCode(e[a]),i=""):i+="%"+e[a].toString(16);return n+k(i)}(o,t,r);break;case"ascii":case"binary":n=function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n}(o,t,r);break;case"base64":i=o,s=r,n=0===(a=t)&&s===i.length?d.fromByteArray(i):d.fromByteArray(i.slice(a,s));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=function(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}(o,t,r);break;default:throw new Error("Unknown encoding")}return n},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(e,t,r,n){if(t=t||0,(n=n||0===n?n:this.length)!==(r=r||0)&&0!==e.length&&0!==this.length){U(r<=n,"sourceEnd < sourceStart"),U(0<=t&&t<e.length,"targetStart out of bounds"),U(0<=r&&r<this.length,"sourceStart out of bounds"),U(0<=n&&n<=this.length,"sourceEnd out of bounds"),n>this.length&&(n=this.length);var a=(n=e.length-t<n-r?e.length-t+r:n)-r;if(a<100||!i._useTypedArrays)for(var s=0;s<a;s++)e[s+t]=this[s+r];else e._set(this.subarray(r,r+a),t)}},i.prototype.slice=function(e,t){var r=this.length;if(e=I(e,r,0),t=I(t,r,r),i._useTypedArrays)return i._augment(this.subarray(e,t));for(var n=t-e,a=new i(n,void 0,!0),s=0;s<n;s++)a[s]=this[s+e];return a},i.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},i.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},i.prototype.readUInt8=function(e,t){if(t||(U(null!=e,"missing offset"),U(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},i.prototype.readUInt16LE=function(e,t){return p(this,e,!0,t)},i.prototype.readUInt16BE=function(e,t){return p(this,e,!1,t)},i.prototype.readUInt32LE=function(e,t){return f(this,e,!0,t)},i.prototype.readUInt32BE=function(e,t){return f(this,e,!1,t)},i.prototype.readInt8=function(e,t){if(t||(U(null!=e,"missing offset"),U(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){return m(this,e,!0,t)},i.prototype.readInt16BE=function(e,t){return m(this,e,!1,t)},i.prototype.readInt32LE=function(e,t){return g(this,e,!0,t)},i.prototype.readInt32BE=function(e,t){return g(this,e,!1,t)},i.prototype.readFloatLE=function(e,t){return b(this,e,!0,t)},i.prototype.readFloatBE=function(e,t){return b(this,e,!1,t)},i.prototype.readDoubleLE=function(e,t){return y(this,e,!0,t)},i.prototype.readDoubleBE=function(e,t){return y(this,e,!1,t)},i.prototype.writeUInt8=function(e,t,r){r||(U(null!=e,"missing value"),U(null!=t,"missing offset"),U(t<this.length,"trying to write beyond buffer length"),L(e,255)),t>=this.length||(this[t]=e)},i.prototype.writeUInt16LE=function(e,t,r){w(this,e,t,!0,r)},i.prototype.writeUInt16BE=function(e,t,r){w(this,e,t,!1,r)},i.prototype.writeUInt32LE=function(e,t,r){v(this,e,t,!0,r)},i.prototype.writeUInt32BE=function(e,t,r){v(this,e,t,!1,r)},i.prototype.writeInt8=function(e,t,r){r||(U(null!=e,"missing value"),U(null!=t,"missing offset"),U(t<this.length,"Trying to write beyond buffer length"),N(e,127,-128)),t>=this.length||(0<=e?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r))},i.prototype.writeInt16LE=function(e,t,r){_(this,e,t,!0,r)},i.prototype.writeInt16BE=function(e,t,r){_(this,e,t,!1,r)},i.prototype.writeInt32LE=function(e,t,r){A(this,e,t,!0,r)},i.prototype.writeInt32BE=function(e,t,r){A(this,e,t,!1,r)},i.prototype.writeFloatLE=function(e,t,r){O(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){O(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){E(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){E(this,e,t,!1,r)},i.prototype.fill=function(e,t,r){if(t=t||0,r=r||this.length,U("number"==typeof(e="string"==typeof(e=e||0)?e.charCodeAt(0):e)&&!isNaN(e),"value is not a number"),U(t<=r,"end < start"),r!==t&&0!==this.length){U(0<=t&&t<this.length,"start out of bounds"),U(0<=r&&r<=this.length,"end out of bounds");for(var n=t;n<r;n++)this[n]=e}},i.prototype.inspect=function(){for(var e=[],t=this.length,n=0;n<t;n++)if(e[n]=T(this[n]),n===r.INSPECT_MAX_BYTES){e[n+1]="...";break}return"<Buffer "+e.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(i._useTypedArrays)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;t<r;t+=1)e[t]=this[t];return e.buffer};var P=i.prototype;function I(e,t,r){return"number"!=typeof e?r:t<=(e=~~e)?t:0<=e||0<=(e+=t)?e:0}function j(e){return(e=~~Math.ceil(+e))<0?0:e}function x(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function T(e){return e<16?"0"+e.toString(16):e.toString(16)}function S(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<=127)t.push(e.charCodeAt(r));else for(var i=r,a=(55296<=n&&n<=57343&&r++,encodeURIComponent(e.slice(i,r+1)).substr(1).split("%")),s=0;s<a.length;s++)t.push(parseInt(a[s],16))}return t}function C(e){return d.toByteArray(e)}function R(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function k(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function L(e,t){U("number"==typeof e,"cannot write a non-number as a number"),U(0<=e,"specified a negative value for writing an unsigned value"),U(e<=t,"value is larger than maximum value for type"),U(Math.floor(e)===e,"value has a fractional component")}function N(e,t,r){U("number"==typeof e,"cannot write a non-number as a number"),U(e<=t,"value larger than maximum allowed value"),U(r<=e,"value smaller than minimum allowed value"),U(Math.floor(e)===e,"value has a fractional component")}function M(e,t,r){U("number"==typeof e,"cannot write a non-number as a number"),U(e<=t,"value larger than maximum allowed value"),U(r<=e,"value smaller than minimum allowed value")}function U(e,t){if(!e)throw new Error(t||"Failed assertion")}i._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=P.get,e.set=P.set,e.write=P.write,e.toString=P.toString,e.toLocaleString=P.toString,e.toJSON=P.toJSON,e.copy=P.copy,e.slice=P.slice,e.readUInt8=P.readUInt8,e.readUInt16LE=P.readUInt16LE,e.readUInt16BE=P.readUInt16BE,e.readUInt32LE=P.readUInt32LE,e.readUInt32BE=P.readUInt32BE,e.readInt8=P.readInt8,e.readInt16LE=P.readInt16LE,e.readInt16BE=P.readInt16BE,e.readInt32LE=P.readInt32LE,e.readInt32BE=P.readInt32BE,e.readFloatLE=P.readFloatLE,e.readFloatBE=P.readFloatBE,e.readDoubleLE=P.readDoubleLE,e.readDoubleBE=P.readDoubleBE,e.writeUInt8=P.writeUInt8,e.writeUInt16LE=P.writeUInt16LE,e.writeUInt16BE=P.writeUInt16BE,e.writeUInt32LE=P.writeUInt32LE,e.writeUInt32BE=P.writeUInt32BE,e.writeInt8=P.writeInt8,e.writeInt16LE=P.writeInt16LE,e.writeInt16BE=P.writeInt16BE,e.writeInt32LE=P.writeInt32LE,e.writeInt32BE=P.writeInt32BE,e.writeFloatLE=P.writeFloatLE,e.writeFloatBE=P.writeFloatBE,e.writeDoubleLE=P.writeDoubleLE,e.writeDoubleBE=P.writeDoubleBE,e.fill=P.fill,e.inspect=P.inspect,e.toArrayBuffer=P.toArrayBuffer,e}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(e,t,r){(function(r,n,i,a,s,o,c,l,u){i=e("buffer").Buffer;var d=new i(4);d.fill(0),t.exports={hash:function(e,t,r,n){for(var a=t(function(e,t){e.length%4!=0&&(r=e.length+(4-e.length%4),e=i.concat([e,d],r));for(var r,n=[],a=t?e.readInt32BE:e.readInt32LE,s=0;s<e.length;s+=4)n.push(a.call(e,s));return n}(e=i.isBuffer(e)?e:new i(e),n),8*e.length),s=(t=n,new i(r)),o=t?s.writeInt32BE:s.writeInt32LE,c=0;c<a.length;c++)o.call(s,a[c],4*c,!0);return s}}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(e,t,r){(function(t,n,i,a,s,o,c,l,u){i=e("buffer").Buffer;var d=e("./sha"),h=e("./sha256"),p=e("./rng"),f={sha1:d,sha256:h,md5:e("./md5")},m=64,g=new i(m);function b(e,t){var r=f[e=e||"sha1"],n=[];return r||y("algorithm:",e,"is not yet supported"),{update:function(e){return i.isBuffer(e)||(e=new i(e)),n.push(e),e.length,this},digest:function(e){var a=i.concat(n);return a=t?function(e,t,r){i.isBuffer(t)||(t=new i(t)),i.isBuffer(r)||(r=new i(r)),t.length>m?t=e(t):t.length<m&&(t=i.concat([t,g],m));for(var n=new i(m),a=new i(m),s=0;s<m;s++)n[s]=54^t[s],a[s]=92^t[s];return r=e(i.concat([n,r])),e(i.concat([a,r]))}(r,t,a):r(a),n=null,e?a.toString(e):a}}}function y(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}g.fill(0),r.createHash=function(e){return b(e)},r.createHmac=b,r.randomBytes=function(e,t){if(!t||!t.call)return new i(p(e));try{t.call(this,void 0,new i(p(e)))}catch(e){t(e)}};var w,v=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],_=function(e){r[e]=function(){y("sorry,",e,"is not implemented yet")}};for(w in v)_(v[w])}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(e,t,r){(function(r,n,i,a,s,o,c,l,u){var d=e("./helpers");function h(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,i=-1732584194,a=271733878,s=0;s<e.length;s+=16){var o=r,c=n,l=i,u=a;r=f(r,n,i,a,e[s+0],7,-680876936),a=f(a,r,n,i,e[s+1],12,-389564586),i=f(i,a,r,n,e[s+2],17,606105819),n=f(n,i,a,r,e[s+3],22,-1044525330),r=f(r,n,i,a,e[s+4],7,-176418897),a=f(a,r,n,i,e[s+5],12,1200080426),i=f(i,a,r,n,e[s+6],17,-1473231341),n=f(n,i,a,r,e[s+7],22,-45705983),r=f(r,n,i,a,e[s+8],7,1770035416),a=f(a,r,n,i,e[s+9],12,-1958414417),i=f(i,a,r,n,e[s+10],17,-42063),n=f(n,i,a,r,e[s+11],22,-1990404162),r=f(r,n,i,a,e[s+12],7,1804603682),a=f(a,r,n,i,e[s+13],12,-40341101),i=f(i,a,r,n,e[s+14],17,-1502002290),r=m(r,n=f(n,i,a,r,e[s+15],22,1236535329),i,a,e[s+1],5,-165796510),a=m(a,r,n,i,e[s+6],9,-1069501632),i=m(i,a,r,n,e[s+11],14,643717713),n=m(n,i,a,r,e[s+0],20,-373897302),r=m(r,n,i,a,e[s+5],5,-701558691),a=m(a,r,n,i,e[s+10],9,38016083),i=m(i,a,r,n,e[s+15],14,-660478335),n=m(n,i,a,r,e[s+4],20,-405537848),r=m(r,n,i,a,e[s+9],5,568446438),a=m(a,r,n,i,e[s+14],9,-1019803690),i=m(i,a,r,n,e[s+3],14,-187363961),n=m(n,i,a,r,e[s+8],20,1163531501),r=m(r,n,i,a,e[s+13],5,-1444681467),a=m(a,r,n,i,e[s+2],9,-51403784),i=m(i,a,r,n,e[s+7],14,1735328473),r=g(r,n=m(n,i,a,r,e[s+12],20,-1926607734),i,a,e[s+5],4,-378558),a=g(a,r,n,i,e[s+8],11,-2022574463),i=g(i,a,r,n,e[s+11],16,1839030562),n=g(n,i,a,r,e[s+14],23,-35309556),r=g(r,n,i,a,e[s+1],4,-1530992060),a=g(a,r,n,i,e[s+4],11,1272893353),i=g(i,a,r,n,e[s+7],16,-155497632),n=g(n,i,a,r,e[s+10],23,-1094730640),r=g(r,n,i,a,e[s+13],4,681279174),a=g(a,r,n,i,e[s+0],11,-358537222),i=g(i,a,r,n,e[s+3],16,-722521979),n=g(n,i,a,r,e[s+6],23,76029189),r=g(r,n,i,a,e[s+9],4,-640364487),a=g(a,r,n,i,e[s+12],11,-421815835),i=g(i,a,r,n,e[s+15],16,530742520),r=b(r,n=g(n,i,a,r,e[s+2],23,-995338651),i,a,e[s+0],6,-198630844),a=b(a,r,n,i,e[s+7],10,1126891415),i=b(i,a,r,n,e[s+14],15,-1416354905),n=b(n,i,a,r,e[s+5],21,-57434055),r=b(r,n,i,a,e[s+12],6,1700485571),a=b(a,r,n,i,e[s+3],10,-1894986606),i=b(i,a,r,n,e[s+10],15,-1051523),n=b(n,i,a,r,e[s+1],21,-2054922799),r=b(r,n,i,a,e[s+8],6,1873313359),a=b(a,r,n,i,e[s+15],10,-30611744),i=b(i,a,r,n,e[s+6],15,-1560198380),n=b(n,i,a,r,e[s+13],21,1309151649),r=b(r,n,i,a,e[s+4],6,-145523070),a=b(a,r,n,i,e[s+11],10,-1120210379),i=b(i,a,r,n,e[s+2],15,718787259),n=b(n,i,a,r,e[s+9],21,-343485551),r=y(r,o),n=y(n,c),i=y(i,l),a=y(a,u)}return Array(r,n,i,a)}function p(e,t,r,n,i,a){return y((t=y(y(t,e),y(n,a)))<<i|t>>>32-i,r)}function f(e,t,r,n,i,a,s){return p(t&r|~t&n,e,t,i,a,s)}function m(e,t,r,n,i,a,s){return p(t&n|r&~n,e,t,i,a,s)}function g(e,t,r,n,i,a,s){return p(t^r^n,e,t,i,a,s)}function b(e,t,r,n,i,a,s){return p(r^(t|~n),e,t,i,a,s)}function y(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}t.exports=function(e){return d.hash(e,h,16)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(e,t,r){(function(e,r,n,i,a,s,o,c,l){t.exports=function(e){for(var t,r=new Array(e),n=0;n<e;n++)0==(3&n)&&(t=4294967296*Math.random()),r[n]=t>>>((3&n)<<3)&255;return r}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(e,t,r){(function(r,n,i,a,s,o,c,l,u){var d=e("./helpers");function h(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var r,n,i,a=Array(80),s=1732584193,o=-271733879,c=-1732584194,l=271733878,u=-1009589776,d=0;d<e.length;d+=16){for(var h=s,m=o,g=c,b=l,y=u,w=0;w<80;w++){a[w]=w<16?e[d+w]:f(a[w-3]^a[w-8]^a[w-14]^a[w-16],1);var v=p(p(f(s,5),(v=o,n=c,i=l,(r=w)<20?v&n|~v&i:!(r<40)&&r<60?v&n|v&i|n&i:v^n^i)),p(p(u,a[w]),(r=w)<20?1518500249:r<40?1859775393:r<60?-1894007588:-899497514));u=l,l=c,c=f(o,30),o=s,s=v}s=p(s,h),o=p(o,m),c=p(c,g),l=p(l,b),u=p(u,y)}return Array(s,o,c,l,u)}function p(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function f(e,t){return e<<t|e>>>32-t}t.exports=function(e){return d.hash(e,h,20,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(e,t,r){(function(r,n,i,a,s,o,c,l,u){function d(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function h(e,t){var r,n=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),i=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),a=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var s,o,c=0;c<e.length;c+=16){for(var l=i[0],u=i[1],h=i[2],p=i[3],g=i[4],b=i[5],y=i[6],w=i[7],v=0;v<64;v++)a[v]=v<16?e[v+c]:d(d(d((o=a[v-2],f(o,17)^f(o,19)^m(o,10)),a[v-7]),(o=a[v-15],f(o,7)^f(o,18)^m(o,3))),a[v-16]),r=d(d(d(d(w,f(o=g,6)^f(o,11)^f(o,25)),g&b^~g&y),n[v]),a[v]),s=d(f(s=l,2)^f(s,13)^f(s,22),l&u^l&h^u&h),w=y,y=b,b=g,g=d(p,r),p=h,h=u,u=l,l=d(r,s);i[0]=d(l,i[0]),i[1]=d(u,i[1]),i[2]=d(h,i[2]),i[3]=d(p,i[3]),i[4]=d(g,i[4]),i[5]=d(b,i[5]),i[6]=d(y,i[6]),i[7]=d(w,i[7])}return i}var p=e("./helpers"),f=function(e,t){return e>>>t|e<<32-t},m=function(e,t){return e>>>t};t.exports=function(e){return p.hash(e,h,32,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(e,t,r){(function(e,t,n,i,a,s,o,c,l){r.read=function(e,t,r,n,i){var a,s,o=8*i-n-1,c=(1<<o)-1,l=c>>1,u=-7,d=r?i-1:0,h=r?-1:1;for(i=e[t+d],d+=h,a=i&(1<<-u)-1,i>>=-u,u+=o;0<u;a=256*a+e[t+d],d+=h,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=n;0<u;s=256*s+e[t+d],d+=h,u-=8);if(0===a)a=1-l;else{if(a===c)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,n),a-=l}return(i?-1:1)*s*Math.pow(2,a-n)},r.write=function(e,t,r,n,i,a){var s,o,c=8*a-i-1,l=(1<<c)-1,u=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,p=n?1:-1;for(a=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+u?d/n:d*Math.pow(2,1-u))*n&&(s++,n/=2),l<=s+u?(o=0,s=l):1<=s+u?(o=(t*n-1)*Math.pow(2,i),s+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,i),s=0));8<=i;e[r+h]=255&o,h+=p,o/=256,i-=8);for(s=s<<i|o,c+=i;0<c;e[r+h]=255&s,h+=p,s/=256,c-=8);e[r+h-p]|=128*a}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(e,t,r){(function(e,r,n,i,a,s,o,c,l){var u,d,h;function p(){}(e=t.exports={}).nextTick=(d="undefined"!=typeof window&&window.setImmediate,h="undefined"!=typeof window&&window.postMessage&&window.addEventListener,d?function(e){return window.setImmediate(e)}:h?(u=[],window.addEventListener("message",(function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<u.length&&u.shift()())}),!0),function(e){u.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},4793:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const i=r(9669),a=r(3597),s=r(5198);t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(e){return{cancelFineTune:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("cancelFineTune","fineTuneId",t);const n="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(t))),i=new URL(n,a.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const o=Object.assign(Object.assign({method:"POST"},s),r);a.setSearchParams(i,{});let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),c),r.headers),{url:a.toPathString(i),options:o}})),createAnswer:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createAnswer","createAnswerRequest",t);const n=new URL("/answers",a.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},i),r),o={"Content-Type":"application/json"};a.setSearchParams(n,{});let c=i&&i.headers?i.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=a.serializeDataIfNeeded(t,s,e),{url:a.toPathString(n),options:s}})),createChatCompletion:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createChatCompletion","createChatCompletionRequest",t);const n=new URL("/chat/completions",a.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},i),r),o={"Content-Type":"application/json"};a.setSearchParams(n,{});let c=i&&i.headers?i.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=a.serializeDataIfNeeded(t,s,e),{url:a.toPathString(n),options:s}})),createClassification:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createClassification","createClassificationRequest",t);const n=new URL("/classifications",a.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},i),r),o={"Content-Type":"application/json"};a.setSearchParams(n,{});let c=i&&i.headers?i.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=a.serializeDataIfNeeded(t,s,e),{url:a.toPathString(n),options:s}})),createCompletion:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createCompletion","createCompletionRequest",t);const n=new URL("/completions",a.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},i),r),o={"Content-Type":"application/json"};a.setSearchParams(n,{});let c=i&&i.headers?i.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=a.serializeDataIfNeeded(t,s,e),{url:a.toPathString(n),options:s}})),createEdit:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createEdit","createEditRequest",t);const n=new URL("/edits",a.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},i),r),o={"Content-Type":"application/json"};a.setSearchParams(n,{});let c=i&&i.headers?i.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=a.serializeDataIfNeeded(t,s,e),{url:a.toPathString(n),options:s}})),createEmbedding:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createEmbedding","createEmbeddingRequest",t);const n=new URL("/embeddings",a.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},i),r),o={"Content-Type":"application/json"};a.setSearchParams(n,{});let c=i&&i.headers?i.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=a.serializeDataIfNeeded(t,s,e),{url:a.toPathString(n),options:s}})),createFile:(t,r,i={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createFile","file",t),a.assertParamExists("createFile","purpose",r);const n=new URL("/files",a.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const o=Object.assign(Object.assign({method:"POST"},s),i),c={},l=new(e&&e.formDataCtor||FormData);void 0!==t&&l.append("file",t),void 0!==r&&l.append("purpose",r),c["Content-Type"]="multipart/form-data",a.setSearchParams(n,{});let u=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign(Object.assign({},c),l.getHeaders()),u),i.headers),o.data=l,{url:a.toPathString(n),options:o}})),createFineTune:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createFineTune","createFineTuneRequest",t);const n=new URL("/fine-tunes",a.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},i),r),o={"Content-Type":"application/json"};a.setSearchParams(n,{});let c=i&&i.headers?i.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=a.serializeDataIfNeeded(t,s,e),{url:a.toPathString(n),options:s}})),createImage:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createImage","createImageRequest",t);const n=new URL("/images/generations",a.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},i),r),o={"Content-Type":"application/json"};a.setSearchParams(n,{});let c=i&&i.headers?i.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=a.serializeDataIfNeeded(t,s,e),{url:a.toPathString(n),options:s}})),createImageEdit:(t,r,i,s,o,c,l,u={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createImageEdit","image",t),a.assertParamExists("createImageEdit","prompt",r);const n=new URL("/images/edits",a.DUMMY_BASE_URL);let d;e&&(d=e.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),u),p={},f=new(e&&e.formDataCtor||FormData);void 0!==t&&f.append("image",t),void 0!==i&&f.append("mask",i),void 0!==r&&f.append("prompt",r),void 0!==s&&f.append("n",s),void 0!==o&&f.append("size",o),void 0!==c&&f.append("response_format",c),void 0!==l&&f.append("user",l),p["Content-Type"]="multipart/form-data",a.setSearchParams(n,{});let m=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign(Object.assign({},p),f.getHeaders()),m),u.headers),h.data=f,{url:a.toPathString(n),options:h}})),createImageVariation:(t,r,i,s,o,c={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createImageVariation","image",t);const n=new URL("/images/variations",a.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},l),c),d={},h=new(e&&e.formDataCtor||FormData);void 0!==t&&h.append("image",t),void 0!==r&&h.append("n",r),void 0!==i&&h.append("size",i),void 0!==s&&h.append("response_format",s),void 0!==o&&h.append("user",o),d["Content-Type"]="multipart/form-data",a.setSearchParams(n,{});let p=l&&l.headers?l.headers:{};return u.headers=Object.assign(Object.assign(Object.assign(Object.assign({},d),h.getHeaders()),p),c.headers),u.data=h,{url:a.toPathString(n),options:u}})),createModeration:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createModeration","createModerationRequest",t);const n=new URL("/moderations",a.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},i),r),o={"Content-Type":"application/json"};a.setSearchParams(n,{});let c=i&&i.headers?i.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},o),c),r.headers),s.data=a.serializeDataIfNeeded(t,s,e),{url:a.toPathString(n),options:s}})),createSearch:(t,r,i={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createSearch","engineId",t),a.assertParamExists("createSearch","createSearchRequest",r);const n="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(t))),s=new URL(n,a.DUMMY_BASE_URL);let o;e&&(o=e.baseOptions);const c=Object.assign(Object.assign({method:"POST"},o),i),l={"Content-Type":"application/json"};a.setSearchParams(s,{});let u=o&&o.headers?o.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},l),u),i.headers),c.data=a.serializeDataIfNeeded(r,c,e),{url:a.toPathString(s),options:c}})),createTranscription:(t,r,i,s,o,c,l={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createTranscription","file",t),a.assertParamExists("createTranscription","model",r);const n=new URL("/audio/transcriptions",a.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const d=Object.assign(Object.assign({method:"POST"},u),l),h={},p=new(e&&e.formDataCtor||FormData);void 0!==t&&p.append("file",t),void 0!==r&&p.append("model",r),void 0!==i&&p.append("prompt",i),void 0!==s&&p.append("response_format",s),void 0!==o&&p.append("temperature",o),void 0!==c&&p.append("language",c),h["Content-Type"]="multipart/form-data",a.setSearchParams(n,{});let f=u&&u.headers?u.headers:{};return d.headers=Object.assign(Object.assign(Object.assign(Object.assign({},h),p.getHeaders()),f),l.headers),d.data=p,{url:a.toPathString(n),options:d}})),createTranslation:(t,r,i,s,o,c={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("createTranslation","file",t),a.assertParamExists("createTranslation","model",r);const n=new URL("/audio/translations",a.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},l),c),d={},h=new(e&&e.formDataCtor||FormData);void 0!==t&&h.append("file",t),void 0!==r&&h.append("model",r),void 0!==i&&h.append("prompt",i),void 0!==s&&h.append("response_format",s),void 0!==o&&h.append("temperature",o),d["Content-Type"]="multipart/form-data",a.setSearchParams(n,{});let p=l&&l.headers?l.headers:{};return u.headers=Object.assign(Object.assign(Object.assign(Object.assign({},d),h.getHeaders()),p),c.headers),u.data=h,{url:a.toPathString(n),options:u}})),deleteFile:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("deleteFile","fileId",t);const n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(t))),i=new URL(n,a.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const o=Object.assign(Object.assign({method:"DELETE"},s),r);a.setSearchParams(i,{});let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),c),r.headers),{url:a.toPathString(i),options:o}})),deleteModel:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("deleteModel","model",t);const n="/models/{model}".replace("{model}",encodeURIComponent(String(t))),i=new URL(n,a.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const o=Object.assign(Object.assign({method:"DELETE"},s),r);a.setSearchParams(i,{});let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),c),r.headers),{url:a.toPathString(i),options:o}})),downloadFile:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("downloadFile","fileId",t);const n="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(t))),i=new URL(n,a.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},s),r);a.setSearchParams(i,{});let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),c),r.headers),{url:a.toPathString(i),options:o}})),listEngines:(t={})=>n(this,void 0,void 0,(function*(){const r=new URL("/engines",a.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},n),t);a.setSearchParams(r,{});let s=n&&n.headers?n.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),s),t.headers),{url:a.toPathString(r),options:i}})),listFiles:(t={})=>n(this,void 0,void 0,(function*(){const r=new URL("/files",a.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},n),t);a.setSearchParams(r,{});let s=n&&n.headers?n.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),s),t.headers),{url:a.toPathString(r),options:i}})),listFineTuneEvents:(t,r,i={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("listFineTuneEvents","fineTuneId",t);const n="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(t))),s=new URL(n,a.DUMMY_BASE_URL);let o;e&&(o=e.baseOptions);const c=Object.assign(Object.assign({method:"GET"},o),i),l={};void 0!==r&&(l.stream=r),a.setSearchParams(s,l);let u=o&&o.headers?o.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},{}),u),i.headers),{url:a.toPathString(s),options:c}})),listFineTunes:(t={})=>n(this,void 0,void 0,(function*(){const r=new URL("/fine-tunes",a.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},n),t);a.setSearchParams(r,{});let s=n&&n.headers?n.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),s),t.headers),{url:a.toPathString(r),options:i}})),listModels:(t={})=>n(this,void 0,void 0,(function*(){const r=new URL("/models",a.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},n),t);a.setSearchParams(r,{});let s=n&&n.headers?n.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),s),t.headers),{url:a.toPathString(r),options:i}})),retrieveEngine:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("retrieveEngine","engineId",t);const n="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(t))),i=new URL(n,a.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},s),r);a.setSearchParams(i,{});let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),c),r.headers),{url:a.toPathString(i),options:o}})),retrieveFile:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("retrieveFile","fileId",t);const n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(t))),i=new URL(n,a.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},s),r);a.setSearchParams(i,{});let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),c),r.headers),{url:a.toPathString(i),options:o}})),retrieveFineTune:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("retrieveFineTune","fineTuneId",t);const n="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(t))),i=new URL(n,a.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},s),r);a.setSearchParams(i,{});let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),c),r.headers),{url:a.toPathString(i),options:o}})),retrieveModel:(t,r={})=>n(this,void 0,void 0,(function*(){a.assertParamExists("retrieveModel","model",t);const n="/models/{model}".replace("{model}",encodeURIComponent(String(t))),i=new URL(n,a.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},s),r);a.setSearchParams(i,{});let c=s&&s.headers?s.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),c),r.headers),{url:a.toPathString(i),options:o}}))}},t.OpenAIApiFp=function(e){const r=t.OpenAIApiAxiosParamCreator(e);return{cancelFineTune(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.cancelFineTune(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createAnswer(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.createAnswer(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createChatCompletion(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.createChatCompletion(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createClassification(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.createClassification(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createCompletion(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.createCompletion(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createEdit(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.createEdit(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createEmbedding(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.createEmbedding(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createFile(t,o,c){return n(this,void 0,void 0,(function*(){const n=yield r.createFile(t,o,c);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createFineTune(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.createFineTune(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createImage(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.createImage(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createImageEdit(t,o,c,l,u,d,h,p){return n(this,void 0,void 0,(function*(){const n=yield r.createImageEdit(t,o,c,l,u,d,h,p);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createImageVariation(t,o,c,l,u,d){return n(this,void 0,void 0,(function*(){const n=yield r.createImageVariation(t,o,c,l,u,d);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createModeration(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.createModeration(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createSearch(t,o,c){return n(this,void 0,void 0,(function*(){const n=yield r.createSearch(t,o,c);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createTranscription(t,o,c,l,u,d,h){return n(this,void 0,void 0,(function*(){const n=yield r.createTranscription(t,o,c,l,u,d,h);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},createTranslation(t,o,c,l,u,d){return n(this,void 0,void 0,(function*(){const n=yield r.createTranslation(t,o,c,l,u,d);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},deleteFile(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.deleteFile(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},deleteModel(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.deleteModel(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},downloadFile(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.downloadFile(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},listEngines(t){return n(this,void 0,void 0,(function*(){const n=yield r.listEngines(t);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},listFiles(t){return n(this,void 0,void 0,(function*(){const n=yield r.listFiles(t);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},listFineTuneEvents(t,o,c){return n(this,void 0,void 0,(function*(){const n=yield r.listFineTuneEvents(t,o,c);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},listFineTunes(t){return n(this,void 0,void 0,(function*(){const n=yield r.listFineTunes(t);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},listModels(t){return n(this,void 0,void 0,(function*(){const n=yield r.listModels(t);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},retrieveEngine(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.retrieveEngine(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},retrieveFile(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.retrieveFile(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},retrieveFineTune(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.retrieveFineTune(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))},retrieveModel(t,o){return n(this,void 0,void 0,(function*(){const n=yield r.retrieveModel(t,o);return a.createRequestFunction(n,i.default,s.BASE_PATH,e)}))}}},t.OpenAIApiFactory=function(e,r,n){const i=t.OpenAIApiFp(e);return{cancelFineTune:(e,t)=>i.cancelFineTune(e,t).then((e=>e(n,r))),createAnswer:(e,t)=>i.createAnswer(e,t).then((e=>e(n,r))),createChatCompletion:(e,t)=>i.createChatCompletion(e,t).then((e=>e(n,r))),createClassification:(e,t)=>i.createClassification(e,t).then((e=>e(n,r))),createCompletion:(e,t)=>i.createCompletion(e,t).then((e=>e(n,r))),createEdit:(e,t)=>i.createEdit(e,t).then((e=>e(n,r))),createEmbedding:(e,t)=>i.createEmbedding(e,t).then((e=>e(n,r))),createFile:(e,t,a)=>i.createFile(e,t,a).then((e=>e(n,r))),createFineTune:(e,t)=>i.createFineTune(e,t).then((e=>e(n,r))),createImage:(e,t)=>i.createImage(e,t).then((e=>e(n,r))),createImageEdit:(e,t,a,s,o,c,l,u)=>i.createImageEdit(e,t,a,s,o,c,l,u).then((e=>e(n,r))),createImageVariation:(e,t,a,s,o,c)=>i.createImageVariation(e,t,a,s,o,c).then((e=>e(n,r))),createModeration:(e,t)=>i.createModeration(e,t).then((e=>e(n,r))),createSearch:(e,t,a)=>i.createSearch(e,t,a).then((e=>e(n,r))),createTranscription:(e,t,a,s,o,c,l)=>i.createTranscription(e,t,a,s,o,c,l).then((e=>e(n,r))),createTranslation:(e,t,a,s,o,c)=>i.createTranslation(e,t,a,s,o,c).then((e=>e(n,r))),deleteFile:(e,t)=>i.deleteFile(e,t).then((e=>e(n,r))),deleteModel:(e,t)=>i.deleteModel(e,t).then((e=>e(n,r))),downloadFile:(e,t)=>i.downloadFile(e,t).then((e=>e(n,r))),listEngines:e=>i.listEngines(e).then((e=>e(n,r))),listFiles:e=>i.listFiles(e).then((e=>e(n,r))),listFineTuneEvents:(e,t,a)=>i.listFineTuneEvents(e,t,a).then((e=>e(n,r))),listFineTunes:e=>i.listFineTunes(e).then((e=>e(n,r))),listModels:e=>i.listModels(e).then((e=>e(n,r))),retrieveEngine:(e,t)=>i.retrieveEngine(e,t).then((e=>e(n,r))),retrieveFile:(e,t)=>i.retrieveFile(e,t).then((e=>e(n,r))),retrieveFineTune:(e,t)=>i.retrieveFineTune(e,t).then((e=>e(n,r))),retrieveModel:(e,t)=>i.retrieveModel(e,t).then((e=>e(n,r)))}};class o extends s.BaseAPI{cancelFineTune(e,r){return t.OpenAIApiFp(this.configuration).cancelFineTune(e,r).then((e=>e(this.axios,this.basePath)))}createAnswer(e,r){return t.OpenAIApiFp(this.configuration).createAnswer(e,r).then((e=>e(this.axios,this.basePath)))}createChatCompletion(e,r){return t.OpenAIApiFp(this.configuration).createChatCompletion(e,r).then((e=>e(this.axios,this.basePath)))}createClassification(e,r){return t.OpenAIApiFp(this.configuration).createClassification(e,r).then((e=>e(this.axios,this.basePath)))}createCompletion(e,r){return t.OpenAIApiFp(this.configuration).createCompletion(e,r).then((e=>e(this.axios,this.basePath)))}createEdit(e,r){return t.OpenAIApiFp(this.configuration).createEdit(e,r).then((e=>e(this.axios,this.basePath)))}createEmbedding(e,r){return t.OpenAIApiFp(this.configuration).createEmbedding(e,r).then((e=>e(this.axios,this.basePath)))}createFile(e,r,n){return t.OpenAIApiFp(this.configuration).createFile(e,r,n).then((e=>e(this.axios,this.basePath)))}createFineTune(e,r){return t.OpenAIApiFp(this.configuration).createFineTune(e,r).then((e=>e(this.axios,this.basePath)))}createImage(e,r){return t.OpenAIApiFp(this.configuration).createImage(e,r).then((e=>e(this.axios,this.basePath)))}createImageEdit(e,r,n,i,a,s,o,c){return t.OpenAIApiFp(this.configuration).createImageEdit(e,r,n,i,a,s,o,c).then((e=>e(this.axios,this.basePath)))}createImageVariation(e,r,n,i,a,s){return t.OpenAIApiFp(this.configuration).createImageVariation(e,r,n,i,a,s).then((e=>e(this.axios,this.basePath)))}createModeration(e,r){return t.OpenAIApiFp(this.configuration).createModeration(e,r).then((e=>e(this.axios,this.basePath)))}createSearch(e,r,n){return t.OpenAIApiFp(this.configuration).createSearch(e,r,n).then((e=>e(this.axios,this.basePath)))}createTranscription(e,r,n,i,a,s,o){return t.OpenAIApiFp(this.configuration).createTranscription(e,r,n,i,a,s,o).then((e=>e(this.axios,this.basePath)))}createTranslation(e,r,n,i,a,s){return t.OpenAIApiFp(this.configuration).createTranslation(e,r,n,i,a,s).then((e=>e(this.axios,this.basePath)))}deleteFile(e,r){return t.OpenAIApiFp(this.configuration).deleteFile(e,r).then((e=>e(this.axios,this.basePath)))}deleteModel(e,r){return t.OpenAIApiFp(this.configuration).deleteModel(e,r).then((e=>e(this.axios,this.basePath)))}downloadFile(e,r){return t.OpenAIApiFp(this.configuration).downloadFile(e,r).then((e=>e(this.axios,this.basePath)))}listEngines(e){return t.OpenAIApiFp(this.configuration).listEngines(e).then((e=>e(this.axios,this.basePath)))}listFiles(e){return t.OpenAIApiFp(this.configuration).listFiles(e).then((e=>e(this.axios,this.basePath)))}listFineTuneEvents(e,r,n){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(e,r,n).then((e=>e(this.axios,this.basePath)))}listFineTunes(e){return t.OpenAIApiFp(this.configuration).listFineTunes(e).then((e=>e(this.axios,this.basePath)))}listModels(e){return t.OpenAIApiFp(this.configuration).listModels(e).then((e=>e(this.axios,this.basePath)))}retrieveEngine(e,r){return t.OpenAIApiFp(this.configuration).retrieveEngine(e,r).then((e=>e(this.axios,this.basePath)))}retrieveFile(e,r){return t.OpenAIApiFp(this.configuration).retrieveFile(e,r).then((e=>e(this.axios,this.basePath)))}retrieveFineTune(e,r){return t.OpenAIApiFp(this.configuration).retrieveFineTune(e,r).then((e=>e(this.axios,this.basePath)))}retrieveModel(e,r){return t.OpenAIApiFp(this.configuration).retrieveModel(e,r).then((e=>e(this.axios,this.basePath)))}}t.OpenAIApi=o},5198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const n=r(9669);t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},t.BaseAPI=class{constructor(e,r=t.BASE_PATH,i=n.default){this.basePath=r,this.axios=i,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}};class i extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}t.RequiredError=i},3597:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestFunction=t.toPathString=t.serializeDataIfNeeded=t.setSearchParams=t.setOAuthToObject=t.setBearerAuthToObject=t.setBasicAuthToObject=t.setApiKeyToObject=t.assertParamExists=t.DUMMY_BASE_URL=void 0;const i=r(5198);function a(e,t,r=""){null!=t&&("object"==typeof t?Array.isArray(t)?t.forEach((t=>a(e,t,r))):Object.keys(t).forEach((n=>a(e,t[n],`${r}${""!==r?".":""}${n}`))):e.has(r)?e.append(r,t):e.set(r,t))}t.DUMMY_BASE_URL="https://example.com",t.assertParamExists=function(e,t,r){if(null==r)throw new i.RequiredError(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},t.setApiKeyToObject=function(e,t,r){return n(this,void 0,void 0,(function*(){if(r&&r.apiKey){const n="function"==typeof r.apiKey?yield r.apiKey(t):yield r.apiKey;e[t]=n}}))},t.setBasicAuthToObject=function(e,t){t&&(t.username||t.password)&&(e.auth={username:t.username,password:t.password})},t.setBearerAuthToObject=function(e,t){return n(this,void 0,void 0,(function*(){if(t&&t.accessToken){const r="function"==typeof t.accessToken?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+r}}))},t.setOAuthToObject=function(e,t,r,i){return n(this,void 0,void 0,(function*(){if(i&&i.accessToken){const n="function"==typeof i.accessToken?yield i.accessToken(t,r):yield i.accessToken;e.Authorization="Bearer "+n}}))},t.setSearchParams=function(e,...t){const r=new URLSearchParams(e.search);a(r,t),e.search=r.toString()},t.serializeDataIfNeeded=function(e,t,r){const n="string"!=typeof e;return(n&&r&&r.isJsonMime?r.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(void 0!==e?e:{}):e||""},t.toPathString=function(e){return e.pathname+e.search+e.hash},t.createRequestFunction=function(e,t,r,n){return(i=t,a=r)=>{const s=Object.assign(Object.assign({},e.options),{url:((null==n?void 0:n.basePath)||a)+e.url});return i.request(s)}}},6577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;const n=r(2811);t.Configuration=class{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${n.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=r(4549))}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}}},6485:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(4793),t),i(r(6577),t)},4549:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},7345:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},5860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6729),i=r(8147),a=r(6506),s=()=>{},o=new i.TimeoutError;t.default=class extends n{constructor(e){var t,r,n,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=s,this._resolveIdle=s,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:a.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((r,n)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const a=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(o)}));r(await a)}catch(e){n(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},7489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){const a=i/2|0;let s=n+a;r(e[s],t)<=0?(n=++s,i-=a+1):i=a}return n}},6506:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7489);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);const i=n.default(this._queue,r,((e,t)=>t.priority-e.priority));this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},2693:(e,t,r)=>{"use strict";const n=r(9353),i=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class a extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const s=(e,t)=>new Promise(((r,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};const o=n.operation(t);o.attempt((async n=>{try{r(await e(n))}catch(e){if(!(e instanceof Error))return void s(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof a)o.stop(),s(e.originalError);else if(e instanceof TypeError&&(c=e.message,!i.includes(c)))o.stop(),s(e);else{((e,t,r)=>{const n=r.retries-(t-1);e.attemptNumber=t,e.retriesLeft=n})(e,n,t);try{await t.onFailedAttempt(e)}catch(e){return void s(e)}o.retry(e)||s(o.mainError())}}var c}))}));e.exports=s,e.exports.default=s,e.exports.AbortError=a},8147:(e,t,r)=>{"use strict";const n=r(7345);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const a=(e,t,r)=>new Promise(((a,s)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void a(e);const o=setTimeout((()=>{if("function"==typeof r){try{a(r())}catch(e){s(e)}return}const n=r instanceof Error?r:new i("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),s(n)}),t);n(e.then(a,s),(()=>{clearTimeout(o)}))}));e.exports=a,e.exports.default=a,e.exports.TimeoutError=i},9353:(e,t,r)=>{e.exports=r(1846)},1846:(e,t,r)=>{var n=r(1960);t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(n,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],e)"function"==typeof e[i]&&n.push(i);for(var a=0;a<n.length;a++){var s=n[a],o=e[s];e[s]=function(n){var i=t.operation(r),a=Array.prototype.slice.call(arguments,1),s=a.pop();a.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),s.apply(this,arguments))})),i.attempt((function(){n.apply(e,a)}))}.bind(e,o),e[s].options=r}}},1960:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],a=i.message,s=(e[a]||0)+1;e[a]=s,s>=r&&(t=i,r=s)}return t}},1023:(e,t,r)=>{"use strict";r.d(t,{F1:()=>a,_i:()=>i});var n=r(8186);const i=e=>e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e,a=async({prompt:e,modelName:t})=>{let r;try{r=(await(0,n.b)(t)).encode(e).length}catch(t){console.warn("Failed to calculate number of tokens, falling back to approximate count"),r=Math.ceil(e.length/4)}const a=(e=>{switch(i(e)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":default:return 4097;case"text-curie-001":case"text-babbage-001":case"text-ada-001":case"code-cushman-001":return 2048;case"code-davinci-002":return 8e3}})(t);return a-r}},3712:(e,t,r)=>{"use strict";r.d(t,{qV:()=>d});var n=r(803),i=r(1023),a=r(8186),s=r(0),o=r(5962),c=r(6134);r(6430);class l extends c.MJ{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}}class u extends s.eq{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??!1,this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class d extends u{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){super({callbacks:e??t,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new n.L(r??{})}async getNumTokens(e){let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await(0,a.b)("modelName"in this?(0,i._i)(this.modelName):"gpt2")}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}return this._encoding&&(t=this._encoding.encode(e).length),t}static _convertInputToPromptValue(e){return"string"==typeof e?new o.nw(e):Array.isArray(e)?new l(e):e}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){const{_type:t,_model:n,...i}=e;if(n&&"base_chat_model"!==n)throw new Error(`Cannot load LLM with model ${n}`);const a={openai:(await r.e(182).then(r.bind(r,4182))).ChatOpenAI}[t];if(void 0===a)throw new Error(`Cannot load LLM with type ${t}`);return new a(i)}}},2671:(e,t,r)=>{"use strict";r.d(t,{Ye:()=>V});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let i;const a=new Uint8Array(16);function s(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(a)}const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));const c=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();const i=(e=e||{}).random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=i[e];return t}return function(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}(i)};var l=r(2385);class u{}class d extends u{get lc_namespace(){return["langchain","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,(0,l.j)(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:"undefined"==typeof process||"true"!==process.env?.LANGCHAIN_CALLBACKS_BACKGROUND}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return l.i.prototype.toJSON.call(this)}toJSONNotImplemented(){return l.i.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends d{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:c()}),Object.assign(this,e)}}}}var h=r(6434);class p extends d{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,t){e.child_runs.push(t)}_startTrace(e){if(void 0!==e.parent_run_id){const t=this.runMap.get(e.parent_run_id);t&&this._addChildRun(t,e)}this.runMap.set(e.id,e)}async _endTrace(e){const t=void 0!==e.parent_run_id&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id)}_getExecutionOrder(e){const t=void 0!==e&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,r,n,i,a,s){const o=this._getExecutionOrder(n),c=Date.now(),l=s?{...i,metadata:s}:i,u={id:r,name:e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{prompts:t},execution_order:o,child_runs:[],child_execution_order:o,run_type:"llm",extra:l??{},tags:a||[]};this._startTrace(u),await(this.onLLMStart?.(u))}async handleChatModelStart(e,t,r,n,i,a,s){const o=this._getExecutionOrder(n),c=Date.now(),l=s?{...i,metadata:s}:i,u={id:r,name:e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:{messages:t},execution_order:o,child_runs:[],child_execution_order:o,run_type:"llm",extra:l??{},tags:a||[]};this._startTrace(u),await(this.onLLMStart?.(u))}async handleLLMEnd(e,t){const r=this.runMap.get(t);if(!r||"llm"!==r?.run_type)throw new Error("No LLM run to end.");r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:r.end_time}),await(this.onLLMEnd?.(r)),await this._endTrace(r)}async handleLLMError(e,t){const r=this.runMap.get(t);if(!r||"llm"!==r?.run_type)throw new Error("No LLM run to end.");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await(this.onLLMError?.(r)),await this._endTrace(r)}async handleChainStart(e,t,r,n,i,a,s){const o=this._getExecutionOrder(n),c=Date.now(),l={id:r,name:e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:c}],inputs:t,execution_order:o,child_execution_order:o,run_type:s??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};this._startTrace(l),await(this.onChainStart?.(l))}async handleChainEnd(e,t){const r=this.runMap.get(t);if(!r)throw new Error("No chain run to end.");r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:r.end_time}),await(this.onChainEnd?.(r)),await this._endTrace(r)}async handleChainError(e,t){const r=this.runMap.get(t);if(!r)throw new Error("No chain run to end.");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await(this.onChainError?.(r)),await this._endTrace(r)}async handleToolStart(e,t,r,n,i,a){const s=this._getExecutionOrder(n),o=Date.now(),c={id:r,name:e.id[e.id.length-1],parent_run_id:n,start_time:o,serialized:e,events:[{name:"start",time:o}],inputs:{input:t},execution_order:s,child_execution_order:s,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};this._startTrace(c),await(this.onToolStart?.(c))}async handleToolEnd(e,t){const r=this.runMap.get(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:r.end_time}),await(this.onToolEnd?.(r)),await this._endTrace(r)}async handleToolError(e,t){const r=this.runMap.get(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await(this.onToolError?.(r)),await this._endTrace(r)}async handleAgentAction(e,t){const r=this.runMap.get(t);if(!r||"chain"!==r?.run_type)return;const n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:Date.now(),kwargs:{action:e}}),await(this.onAgentAction?.(r))}async handleAgentEnd(e,t){const r=this.runMap.get(t);r&&"chain"===r?.run_type&&(r.events.push({name:"agent_end",time:Date.now(),kwargs:{action:e}}),await(this.onAgentEnd?.(r)))}async handleRetrieverStart(e,t,r,n,i,a){const s=this._getExecutionOrder(n),o=Date.now(),c={id:r,name:e.id[e.id.length-1],parent_run_id:n,start_time:o,serialized:e,events:[{name:"start",time:o}],inputs:{query:t},execution_order:s,child_execution_order:s,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};this._startTrace(c),await(this.onRetrieverStart?.(c))}async handleRetrieverEnd(e,t){const r=this.runMap.get(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:r.end_time}),await(this.onRetrieverEnd?.(r)),await this._endTrace(r)}async handleRetrieverError(e,t){const r=this.runMap.get(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:r.end_time}),await(this.onRetrieverError?.(r)),await this._endTrace(r)}async handleText(e,t){const r=this.runMap.get(t);r&&"chain"===r?.run_type&&(r.events.push({name:"text",time:Date.now(),kwargs:{text:e}}),await(this.onText?.(r)))}async handleLLMNewToken(e,t,r){const n=this.runMap.get(r);n&&"llm"===n?.run_type&&(n.events.push({name:"new_token",time:Date.now(),kwargs:{token:e,idx:t}}),await(this.onLLMNewToken?.(n)))}}function f(e,t){return`${e.open}${t}${e.close}`}function m(e,t){try{return JSON.stringify(e,null,2)}catch(e){return t}}function g(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:b}=h;class y extends p{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const e=this.runMap.get(r.parent_run_id);if(!e)break;t.push(e),r=e}return t}getBreadcrumbs(e){const t=[...this.getParents(e).reverse(),e].map(((e,t,r)=>{const n=`${e.execution_order}:${e.run_type}:${e.name}`;return t===r.length-1?f(h.bold,n):n})).join(" > ");return f(b.grey,t)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.green,"[chain/start]")} [${t}] Entering Chain run with input: ${m(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.cyan,"[chain/end]")} [${t}] [${g(e)}] Exiting Chain run with output: ${m(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.red,"[chain/error]")} [${t}] [${g(e)}] Chain run errored with error: ${m(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map((e=>e.trim()))}:e.inputs;console.log(`${f(b.green,"[llm/start]")} [${t}] Entering LLM run with input: ${m(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.cyan,"[llm/end]")} [${t}] [${g(e)}] Exiting LLM run with output: ${m(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.red,"[llm/error]")} [${t}] [${g(e)}] LLM run errored with error: ${m(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.green,"[tool/start]")} [${t}] Entering Tool run with input: "${e.inputs.input?.trim()}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.cyan,"[tool/end]")} [${t}] [${g(e)}] Exiting Tool run with output: "${e.outputs?.output?.trim()}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.red,"[tool/error]")} [${t}] [${g(e)}] Tool run errored with error: ${m(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${m(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.cyan,"[retriever/end]")} [${t}] [${g(e)}] Exiting Retriever run with output: ${m(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${f(b.red,"[retriever/error]")} [${t}] [${g(e)}] Retriever run errored with error: ${m(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${f(b.blue,"[agent/action]")} [${r}] Agent selected action: ${m(t.actions[t.actions.length-1],"[action]")}`)}}const w={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let v;const _=new Uint8Array(16);function A(){if(!v&&(v="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(_)}const O=[];for(let e=0;e<256;++e)O.push((e+256).toString(16).slice(1));const E=function(e,t,r){if(w.randomUUID&&!t&&!e)return w.randomUUID();const n=(e=e||{}).random||(e.rng||A)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase()}(n)};var P=r(2693),I=r(5860);const j=[400,401,403,404,405,406,407,408,409];class x{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t=I.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add((()=>P((()=>e(...t).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response?.status;if(t&&j.includes(+t))throw e},retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise(((t,r)=>{e.signal?.addEventListener("abort",(()=>{r(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(...e){return this.call((()=>fetch(...e).then((e=>e.ok?e:Promise.reject(e)))))}}const T=()=>"undefined"!=typeof Deno;let S;function C(e){try{return"undefined"!=typeof process?process.env?.[e]:void 0}catch(e){return}}const R=e=>{const t=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===t||"127.0.0.1"===t||"::1"===t},k=async(e,t)=>{const r=await e.text();if(!e.ok)throw new Error(`Failed to ${t}: ${e.status} ${e.statusText} ${r}`)};function L(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}class N{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=N.getDefaultClientConfig();this.apiUrl=L(e.apiUrl??t.apiUrl)??"",this.apiKey=L(e.apiKey??t.apiKey),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new x(e.callerOptions??{})}static getDefaultClientConfig(){const e=C("LANGCHAIN_API_KEY");return{apiUrl:C("LANGCHAIN_ENDPOINT")??(e?"https://api.smith.langchain.com":"http://localhost:1984"),apiKey:e}}validateApiKeyIfHosted(){if(!R(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return R(this.apiUrl)?"http://localhost":this.apiUrl.split(".",1)[0].includes("dev")?"https://dev.smith.langchain.com":"https://smith.langchain.com"}get headers(){const e={};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _get(e,t){const r=t?.toString()??"",n=`${this.apiUrl}${e}?${r}`,i=await this.caller.call(fetch,n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok)throw new Error(`Failed to fetch ${e}: ${i.status} ${i.statusText}`);return i.json()}async*_getPaginated(e,t=new URLSearchParams){let r=Number(t.get("offset"))||0;const n=Number(t.get("limit"))||100;for(;;){t.set("offset",String(r)),t.set("limit",String(n));const i=`${this.apiUrl}${e}?${t}`,a=await this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);const s=await a.json();if(0===s.length)break;if(yield s,s.length<n)break;r+=s.length}}async createRun(e){const t={...this.headers,"Content-Type":"application/json"},r=e.extra??{},n=await async function(){if(void 0===S){const e=(()=>{let e;return e="undefined"!=typeof window&&void 0!==window.document?"browser":"undefined"==typeof process||void 0===process.versions||void 0===process.versions.node||T()?"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":T()?"deno":"other":"node",e})();S={library:"langsmith",runtime:e}}return S}(),i=e.project_name;delete e.project_name;const a={session_name:i,...e,extra:{...e.extra,runtime:{...n,...r.runtime}}},s=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:t,body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await k(s,"create run")}async updateRun(e,t){const r={...this.headers,"Content-Type":"application/json"},n=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:r,body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});await k(n,"update run")}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){let r=await this._get(`/runs/${e}`);return t&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e}){const t=await this.readRun(e);if(t.app_path)return`${this.getHostUrl()}${t.app_path}`}async _loadChildRuns(e){const t=await async function(e){const t=[];for await(const r of e)t.push(r);return t}(this.listRuns({id:e.child_run_ids})),r={},n={};t.sort(((e,t)=>e.execution_order-t.execution_order));for(const e of t){if(null===e.parent_run_id||void 0===e.parent_run_id)throw new Error(`Child run ${e.id} has no parent`);e.parent_run_id in r||(r[e.parent_run_id]=[]),r[e.parent_run_id].push(e),n[e.id]=e}e.child_runs=r[e.id]||[];for(const t in r)t!==e.id&&(n[t].child_runs=r[t]);return e}async*listRuns({projectId:e,projectName:t,parentRunId:r,referenceExampleId:n,datasetId:i,startTime:a,endTime:s,executionOrder:o,runType:c,error:l,id:u,limit:d,offset:h,query:p,filter:f,orderBy:m}){const g=new URLSearchParams;let b=e;if(t){if(e)throw new Error("Only one of projectId or projectName may be given");b=(await this.readProject({projectName:t})).id}if(b&&g.append("session",b),r&&g.append("parent_run",r),n&&g.append("reference_example",n),i&&g.append("dataset",i),a&&g.append("start_time",a.toISOString()),s&&g.append("end_time",s.toISOString()),o&&g.append("execution_order",o.toString()),c&&g.append("run_type",c),void 0!==l&&g.append("error",l.toString()),void 0!==u)for(const e of u)g.append("id",e);void 0!==d&&g.append("limit",d.toString()),void 0!==h&&g.append("offset",h.toString()),void 0!==p&&g.append("query",p),void 0!==f&&g.append("filter",f),void 0!==m&&m.map((e=>g.append("order_by",e)));for await(const e of this._getPaginated("/runs",g))yield*e}async deleteRun(e){const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await k(t,"delete run")}async shareRun(e,{shareId:t}={}){const r={run_id:e,share_token:t||E()},n=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)}),i=await n.json();if(null===i||!("share_token"in i))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${i.share_token}/r`}async unshareRun(e){const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await k(t,"unshare run")}async readRunSharedLink(e){const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)}),r=await t.json();if(null!==r&&"share_token"in r)return`${this.getHostUrl()}/public/${r.share_token}/r`}async createProject({projectName:e,projectExtra:t,upsert:r}){const n=r?"?upsert=true":"",i=`${this.apiUrl}/sessions${n}`,a={name:e};void 0!==t&&(a.extra=t);const s=await this.caller.call(fetch,i,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)}),o=await s.json();if(!s.ok)throw new Error(`Failed to create session ${e}: ${s.status} ${s.statusText}`);return o}async readProject({projectId:e,projectName:t}){let r="/sessions";const n=new URLSearchParams;if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==e)r+=`/${e}`;else{if(void 0===t)throw new Error("Must provide projectName or projectId");n.append("name",t)}const i=await this._get(r,n);let a;if(Array.isArray(i)){if(0===i.length)throw new Error(`Project[id=${e}, name=${t}] not found`);a=i[0]}else a=i;return a}async*listProjects(){for await(const e of this._getPaginated("/sessions"))yield*e}async deleteProject({projectId:e,projectName:t}){let r;if(void 0===e&&void 0===t)throw new Error("Must provide projectName or projectId");if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");r=void 0===e?(await this.readProject({projectName:t})).id:e;const n=await this.caller.call(fetch,`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await k(n,`delete session ${r} (${t})`)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:n,description:i,dataType:a,name:s}){const o=`${this.apiUrl}/datasets/upload`,c=new FormData;c.append("file",e,t),r.forEach((e=>{c.append("input_keys",e)})),n.forEach((e=>{c.append("output_keys",e)})),i&&c.append("description",i),a&&c.append("data_type",a),s&&c.append("name",s);const l=await this.caller.call(fetch,o,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms)});if(!l.ok){const e=await l.json();if(e.detail&&e.detail.includes("already exists"))throw new Error(`Dataset ${t} already exists`);throw new Error(`Failed to upload CSV: ${l.status} ${l.statusText}`)}return await l.json()}async createDataset(e,{description:t,dataType:r}={}){const n={name:e,description:t};r&&(n.data_type=r);const i=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok){const t=await i.json();if(t.detail&&t.detail.includes("already exists"))throw new Error(`Dataset ${e} already exists`);throw new Error(`Failed to create dataset ${i.status} ${i.statusText}`)}return await i.json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const n=new URLSearchParams({limit:"1"});if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)r+=`/${e}`;else{if(void 0===t)throw new Error("Must provide datasetName or datasetId");n.append("name",t)}const i=await this._get(r,n);let a;if(Array.isArray(i)){if(0===i.length)throw new Error(`Dataset[id=${e}, name=${t}] not found`);a=i[0]}else a=i;return a}async*listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:n,datasetNameContains:i}={}){const a=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(void 0!==r)for(const e of r)a.append("id",e);void 0!==n&&a.append("name",n),void 0!==i&&a.append("name_contains",i);for await(const e of this._getPaginated("/datasets",a))yield*e}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",n=e;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t&&(n=(await this.readDataset({datasetName:t})).id),void 0===n)throw new Error("Must provide datasetName or datasetId");r+=`/${n}`;const i=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok)throw new Error(`Failed to delete ${r}: ${i.status} ${i.statusText}`);await i.json()}async createExample(e,t,{datasetId:r,datasetName:n,createdAt:i}){let a=r;if(void 0===a&&void 0===n)throw new Error("Must provide either datasetName or datasetId");if(void 0!==a&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");void 0===a&&(a=(await this.readDataset({datasetName:n})).id);const s={dataset_id:a,inputs:e,outputs:t,created_at:(i||new Date).toISOString()},o=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)});if(!o.ok)throw new Error(`Failed to create example: ${o.status} ${o.statusText}`);return await o.json()}async readExample(e){const t=`/examples/${e}`;return await this._get(t)}async*listExamples({datasetId:e,datasetName:t,exampleIds:r}={}){let n;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)n=e;else{if(void 0===t)throw new Error("Must provide a datasetName or datasetId");n=(await this.readDataset({datasetName:t})).id}const i=new URLSearchParams({dataset:n});if(void 0!==r)for(const e of r)i.append("id",e);for await(const e of this._getPaginated("/examples",i))yield*e}async deleteExample(e){const t=`/examples/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async updateExample(e,t){const r=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to update example ${e}: ${r.status} ${r.statusText}`);return await r.json()}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:n}={loadChildRuns:!1}){let i,a;if("string"==typeof e)i=await this.readRun(e,{loadChildRuns:n});else{if("object"!=typeof e||!("id"in e))throw new Error("Invalid run type: "+typeof e);i=e}null!==i.reference_example_id&&void 0!==i.reference_example_id&&(a=await this.readExample(i.reference_example_id));const s=await t.evaluateRun(i,a);let o=r??{};return s.evaluatorInfo&&(o={...o,...s.evaluatorInfo}),await this.createFeedback(i.id,s.key,{score:s.score,value:s.value,comment:s.comment,correction:s.correction,sourceInfo:o,feedbackSourceType:"MODEL"})}async createFeedback(e,t,{score:r,value:n,correction:i,comment:a,sourceInfo:s,feedbackSourceType:o="API"}){let c;if("API"===o)c={type:"api",metadata:s??{}};else{if("MODEL"!==o)throw new Error(`Unknown feedback source type ${o}`);c={type:"model",metadata:s??{}}}const l={id:E(),run_id:e,key:t,score:r,value:n,correction:i,comment:a,feedback_source:c},u=await this.caller.call(fetch,`${this.apiUrl}/feedback`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms)});if(!u.ok)throw new Error(`Failed to create feedback for run ${e}: ${u.status} ${u.statusText}`);return await u.json()}async updateFeedback(e,{score:t,value:r,correction:n,comment:i}){const a={};return null!=t&&(a.score=t),null!=r&&(a.value=r),null!=n&&(a.correction=n),null!=i&&(a.comment=i),(await this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)})).json()}async readFeedback(e){const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){const t=`/feedback/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async*listFeedback({runIds:e}={}){const t=new URLSearchParams;e&&t.append("run",e.join(","));for await(const e of this._getPaginated("/feedback",t))yield*e}}var M=r(5606);class U extends p{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:r,client:n}=e;this.projectName=r??(0,M.lS)("LANGCHAIN_PROJECT")??(0,M.lS)("LANGCHAIN_SESSION"),this.exampleId=t,this.client=n??new N({})}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await(0,M.sA)()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async _persistRunSingle(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async _updateRunSingle(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events};await this.client.updateRun(e.id,t)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}var $=r(7967);class B extends p{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:(0,M.lS)("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const e=(0,M.lS)("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}async newSession(e){const t={start_time:Date.now(),name:e},r=await this.persistSession(t);return this.session=r,r}async loadSession(e){const t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)}async loadDefaultSession(){const e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){const t=this.session??await this.loadDefaultSession(),r=e.serialized;let n;if("llm"===e.run_type){const i=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map((e=>(0,$.zs)(e)));n={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,prompts:i,response:e.outputs}}else if("chain"===e.run_type){const i=await Promise.all(e.child_runs.map((e=>this.convertV2RunToRun(e))));n={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:i.filter((e=>"llm"===e.type)),child_chain_runs:i.filter((e=>"chain"===e.type)),child_tool_runs:i.filter((e=>"tool"===e.type))}}else{if("tool"!==e.run_type)throw new Error(`Unknown run type: ${e.run_type}`);{const i=await Promise.all(e.child_runs.map((e=>this.convertV2RunToRun(e))));n={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,tool_input:e.inputs.input,output:e.outputs?.output,action:JSON.stringify(r),child_llm_runs:i.filter((e=>"llm"===e.type)),child_chain_runs:i.filter((e=>"chain"===e.type)),child_tool_runs:i.filter((e=>"tool"===e.type))}}}return n}async persistRun(e){let t,r;r=void 0!==e.run_type?await this.convertV2RunToRun(e):e,t="llm"===r.type?`${this.endpoint}/llm-runs`:"chain"===r.type?`${this.endpoint}/chain-runs`:`${this.endpoint}/tool-runs`;const n=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(r)});n.ok||console.error(`Failed to persist run: ${n.status} ${n.statusText}`)}async persistSession(e){const t=`${this.endpoint}/sessions`,r=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return r.ok?{id:(await r.json()).id,...e}:(console.error(`Failed to persist session: ${r.status} ${r.statusText}, using default session.`),{id:1,...e})}async _handleSessionResponse(e){const t=await fetch(e,{method:"GET",headers:this.headers});let r;if(!t.ok)return console.error(`Failed to load session: ${t.status} ${t.statusText}`),r={id:1,start_time:Date.now()},this.session=r,r;const n=await t.json();return 0===n.length?(r={id:1,start_time:Date.now()},this.session=r,r):([r]=n,this.session=r,r)}}let F;async function z(e,t){!0===t?await e():(void 0===F&&(F=new(0,I.default)({autoStart:!0,concurrency:1})),F.add(e))}class D{setHandler(e){return this.setHandlers([e])}}class q{constructor(e,t,r,n,i,a,s,o){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:o})}async handleText(e){await Promise.all(this.handlers.map((t=>z((async()=>{try{await(t.handleText?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleText: ${e}`)}}),t.awaitHandlers))))}}class H extends q{getChild(e){const t=new V(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleRetriever`)}}),t.awaitHandlers))))}async handleRetrieverError(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleRetrieverError: ${e}`)}}),t.awaitHandlers))))}}class K extends q{async handleLLMNewToken(e,t={prompt:0,completion:0}){await Promise.all(this.handlers.map((r=>z((async()=>{if(!r.ignoreLLM)try{await(r.handleLLMNewToken?.(e,t,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${e}`)}}),r.awaitHandlers))))}async handleLLMError(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${e}`)}}),t.awaitHandlers))))}async handleLLMEnd(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${e}`)}}),t.awaitHandlers))))}}class Y extends q{getChild(e){const t=new V(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreChain)try{await(t.handleChainError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleChainError: ${e}`)}}),t.awaitHandlers))))}async handleChainEnd(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreChain)try{await(t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleChainEnd: ${e}`)}}),t.awaitHandlers))))}async handleAgentAction(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${e}`)}}),t.awaitHandlers))))}async handleAgentEnd(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${e}`)}}),t.awaitHandlers))))}}class J extends q{getChild(e){const t=new V(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreAgent)try{await(t.handleToolError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${e}`)}}),t.awaitHandlers))))}async handleToolEnd(e){await Promise.all(this.handlers.map((t=>z((async()=>{if(!t.ignoreAgent)try{await(t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${e}`)}}),t.awaitHandlers))))}}class V extends D{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,t,r=void 0,n=void 0,i=void 0){return Promise.all(t.map((async t=>{const r=c();return await Promise.all(this.handlers.map((n=>z((async()=>{if(!n.ignoreLLM)try{await(n.handleLLMStart?.(e,[t],r,this._parentRunId,i,this.tags,this.metadata))}catch(e){console.error(`Error in handler ${n.constructor.name}, handleLLMStart: ${e}`)}}),n.awaitHandlers)))),new K(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChatModelStart(e,t,r=void 0,n=void 0,i=void 0){return Promise.all(t.map((async t=>{const r=c();return await Promise.all(this.handlers.map((n=>z((async()=>{if(!n.ignoreLLM)try{if(n.handleChatModelStart)await(n.handleChatModelStart?.(e,[t],r,this._parentRunId,i,this.tags,this.metadata));else if(n.handleLLMStart){const a=(0,$.zs)(t);await(n.handleLLMStart?.(e,[a],r,this._parentRunId,i,this.tags,this.metadata))}}catch(e){console.error(`Error in handler ${n.constructor.name}, handleLLMStart: ${e}`)}}),n.awaitHandlers)))),new K(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChainStart(e,t,r=c(),n=void 0){return await Promise.all(this.handlers.map((i=>z((async()=>{if(!i.ignoreChain)try{await(i.handleChainStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,n))}catch(e){console.error(`Error in handler ${i.constructor.name}, handleChainStart: ${e}`)}}),i.awaitHandlers)))),new Y(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=c()){return await Promise.all(this.handlers.map((n=>z((async()=>{if(!n.ignoreAgent)try{await(n.handleToolStart?.(e,t,r,this._parentRunId,this.tags,this.metadata))}catch(e){console.error(`Error in handler ${n.constructor.name}, handleToolStart: ${e}`)}}),n.awaitHandlers)))),new J(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=c(),n=void 0){return await Promise.all(this.handlers.map((n=>z((async()=>{if(!n.ignoreRetriever)try{await(n.handleRetrieverStart?.(e,t,r,this._parentRunId,this.tags,this.metadata))}catch(e){console.error(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${e}`)}}),n.awaitHandlers)))),new H(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter((t=>t!==e)),this.inheritableHandlers=this.inheritableHandlers.filter((t=>t!==e))}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter((t=>!e.includes(t))),this.inheritableTags=this.inheritableTags.filter((t=>!e.includes(t)))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new V(this._parentRunId);for(const e of this.handlers){const t=this.inheritableHandlers.includes(e);r.addHandler(e,t)}for(const e of this.tags){const t=this.inheritableTags.includes(e);r.addTags([e],t)}for(const e of Object.keys(this.metadata)){const t=Object.keys(this.inheritableMetadata).includes(e);r.addMetadata({[e]:this.metadata[e]},t)}for(const n of e)r.handlers.filter((e=>"console_callback_handler"===e.name)).some((e=>e.name===n.name))||r.addHandler(n,t);return r}static fromHandlers(e){const t=new this;return t.addHandler(new class extends d{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:c()}),Object.assign(this,e)}}),t}static async configure(e,t,r,n,i,a,s){let o;(e||t)&&(Array.isArray(e)||!e?(o=new V,o.setHandlers(e?.map(W)??[],!0)):o=e,o=o.copy(Array.isArray(t)?t.map(W):t?.handlers,!1));const c=(0,M.lS)("LANGCHAIN_VERBOSE")||s?.verbose,l="true"===(0,M.lS)("LANGCHAIN_TRACING_V2"),u=l||((0,M.lS)("LANGCHAIN_TRACING")??!1);if(c||u){if(o||(o=new V),c&&!o.handlers.some((e=>e.name===y.prototype.name))){const e=new y;o.addHandler(e,!0)}if(u&&!o.handlers.some((e=>"langchain_tracer"===e.name)))if(l)o.addHandler(await async function(){return new U}(),!0);else{const e=(0,M.lS)("LANGCHAIN_PROJECT")&&(0,M.lS)("LANGCHAIN_SESSION");o.addHandler(await async function(e){const t=new B;return e?await t.loadSession(e):await t.loadDefaultSession(),t}(e),!0)}}return(r||n)&&o&&(o.addTags(r??[]),o.addTags(n??[],!1)),(i||a)&&o&&(o.addMetadata(i??{}),o.addMetadata(a??{},!1)),o}}function W(e){return"name"in e?e:d.fromMethods(e)}},1763:(e,t,r)=>{"use strict";r.r(t),r.d(t,{OpenAI:()=>O,OpenAIChat:()=>_,PromptLayerOpenAI:()=>E,PromptLayerOpenAIChat:()=>A});var n=r(6485),i=r(1023),a=r(6134),s=r(566),o=r(3153);const c=(e,t)=>e.reduce(((e,r,n)=>{const i=Math.floor(n/t),a=e[i]||[];return e[i]=a.concat([r]),e}),[]);var l=r(5606),u=r(3551),d=r(1858),h=r(705);const p=(...e)=>h(e.join("_")),f=new Map;class m extends a.H2{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(p(e,t))??null)}async update(e,t,r){this.cache.set(p(e,t),r)}static global(){return new m(f)}}var g=r(3712),b=r(2671),y=r(7967);class w extends g.qV{constructor({cache:e,concurrency:t,...r}){super(t?{maxConcurrency:t,...r}:r),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache="object"==typeof e?e:e?m.global():void 0}async invoke(e,t){const r=w._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t?.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptions(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r?.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout)),[t,r]}async*_streamIterator(e,t){if(this._streamResponseChunks===w.prototype._streamResponseChunks)yield this.invoke(e,t);else{const r=w._convertInputToPromptValue(e),[n,i]=this._separateRunnableConfigFromCallOptions(t),s=await b.Ye.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),o={options:i,invocation_params:this?.invocationParams(i)},c=await(s?.handleLLMStart(this.toJSON(),[r.toString()],void 0,void 0,o));let l=new a.b6({text:""});try{for await(const t of this._streamResponseChunks(e.toString(),i,c?.[0]))l=l?l.concat(t):t,"string"==typeof t.text&&(yield t.text)}catch(e){throw await Promise.all((c??[]).map((t=>t?.handleLLMError(e)))),e}await Promise.all((c??[]).map((e=>e?.handleLLMEnd({generations:[[l]]}))))}}async generatePrompt(e,t,r){const n=e.map((e=>e.toString()));return this.generate(n,t,r)}invocationParams(e){return{}}_flattenLLMResult(e){const t=[];for(let r=0;r<e.generations.length;r+=1){const n=e.generations[r];if(0===r)t.push({generations:[n],llmOutput:e.llmOutput});else{const r=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;t.push({generations:[n],llmOutput:r})}}return t}async _generateUncached(e,t,r){const n=await b.Ye.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),i={options:t,invocation_params:this?.invocationParams(t)},s=await(n?.handleLLMStart(this.toJSON(),e,void 0,void 0,i));let o;try{o=await this._generate(e,t,s?.[0])}catch(e){throw await Promise.all((s??[]).map((t=>t?.handleLLMError(e)))),e}const c=this._flattenLLMResult(o);await Promise.all((s??[]).map(((e,t)=>e?.handleLLMEnd(c[t]))));const l=s?.map((e=>e.runId))||void 0;return Object.defineProperty(o,a.WH,{value:l?{runIds:l}:void 0,configurable:!0}),o}async generate(e,t,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let n;n=Array.isArray(t)?{stop:t}:t;const[i,a]=this._separateRunnableConfigFromCallOptions(n);if(i.callbacks=i.callbacks??r,!this.cache)return this._generateUncached(e,a,i);const{cache:s}=this,o=this.serialize();o.stop=a.stop??o.stop;const c=`${Object.entries(o).sort()}`,l=[],u=await Promise.all(e.map((async(e,t)=>{const r=await s.lookup(e,c);return r||l.push(t),r})));let d={};if(l.length>0){const t=await this._generateUncached(l.map((t=>e[t])),a,i);await Promise.all(t.generations.map((async(t,r)=>{const n=l[r];return u[n]=t,s.update(e[n],c,t)}))),d=t.llmOutput??{}}return{generations:u,llmOutput:d}}async call(e,t,r){const{generations:n}=await this.generate([e],t,r);return n[0][0].text}async predict(e,t,r){return this.call(e,t,r)}async predictMessages(e,t,r){const n=(0,y.zs)(e),i=await this.call(n,t,r);return new a.gY(i)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}static async deserialize(e){const{_type:t,_model:n,...i}=e;if(n&&"base_llm"!==n)throw new Error(`Cannot load LLM with model ${n}`);const a={openai:(await Promise.resolve().then(r.bind(r,1763))).OpenAI}[t];if(void 0===a)throw new Error(`Cannot load  LLM with type ${t}`);return new a(i)}}class v extends w{async _generate(e,t,r){return{generations:await Promise.all(e.map(((e,n)=>this._call(e,{...t,promptIndex:n},r).then((e=>[{text:e}])))))}}}class _ extends v{static lc_name(){return"OpenAIChat"}get callKeys(){return[...super.callKeys,"options","promptIndex"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,t){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"prefixMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??(0,l.lS)("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??(0,l.lS)("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,l.lS)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiCompletionsDeploymentName||e?.azureOpenAIApiDeploymentName)??((0,l.lS)("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||(0,l.lS)("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??(0,l.lS)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,l.lS)("AZURE_OPENAI_BASE_PATH"),this.organization=e?.configuration?.organization??(0,l.lS)("OPENAI_ORGANIZATION"),this.modelName=e?.modelName??this.modelName,this.prefixMessages=e?.prefixMessages??this.prefixMessages,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.maxTokens=e?.maxTokens,this.stop=e?.stop,this.user=e?.user,this.streaming=e?.streaming??!1,this.n>1)throw new Error("Cannot use n > 1 in OpenAIChat LLM. Use ChatOpenAI Chat Model instead.");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,...t,...e?.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,logit_bias:this.logitBias,max_tokens:-1===this.maxTokens?void 0:this.maxTokens,stop:e?.stop??this.stop,user:this.user,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}formatMessages(e){const t={role:"user",content:e};return this.prefixMessages?[...this.prefixMessages,t]:[t]}async*_streamResponseChunks(e,t,r){const n={...this.invocationParams(t),messages:this.formatMessages(e),stream:!0},i=this.startStream(n,t);for await(const e of i){const t=JSON.parse(e),n=t.choices?.[0];if(!n)continue;const{delta:i}=n,s=new a.b6({text:i.content??""});yield s,r?.handleLLMNewToken(s.text??"")}}startStream(e,t){let r=!1;const n=new TransformStream,i=n.writable.getWriter(),a=(0,d.H)(n.readable);let o;return this.completionWithRetry(e,{...t,adapter:s.Z,responseType:"stream",onmessage:e=>{if(!r)if("[DONE]"===e.data?.trim?.())r=!0,i.close();else{const t=JSON.parse(e.data);if(t.error)throw r=!0,t.error;i.write(e.data)}}}).catch((e=>{r||(o=e,r=!0,i.close())})),{async next(){const e=await a.next();if(o)throw o;return e},[Symbol.asyncIterator](){return this}}}async _call(e,t,r){const n=this.invocationParams(t),i=n.stream?await new Promise(((i,a)=>{let o,c=!1,l=!1;this.completionWithRetry({...n,messages:this.formatMessages(e)},{signal:t.signal,...t.options,adapter:s.Z,responseType:"stream",onmessage:e=>{if("[DONE]"===e.data?.trim?.()){if(l||c)return;l=!0,i(o)}else{const n=JSON.parse(e.data);if(n?.error){if(c)return;return c=!0,void a(n.error)}const s=n;o||(o={id:s.id,object:s.object,created:s.created,model:s.model,choices:[]});for(const e of s.choices)if(null!=e){let n=o.choices.find((t=>t.index===e.index));n||(n={index:e.index,finish_reason:e.finish_reason??void 0},o.choices.push(n)),n.message||(n.message={role:e.delta?.role,content:e.delta?.content??""}),n.message.content+=e.delta?.content??"",r?.handleLLMNewToken(e.delta?.content??"",{prompt:t.promptIndex??0,completion:e.index})}l||c||!s.choices.every((e=>null!=e.finish_reason))||(l=!0,i(o))}}}).catch((e=>{c||(c=!0,a(e))}))})):await this.completionWithRetry({...n,messages:this.formatMessages(e)},{signal:t.signal,...t.options});return i.choices[0].message?.content??""}async completionWithRetry(e,t){if(!this.client){const e={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},t=(0,o.O)(e),r=new n.Configuration({...this.clientConfig,basePath:t,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new n.OpenAIApi(r)}const r={adapter:(0,l.UG)()?void 0:s.Z,...this.clientConfig.baseOptions,...t};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.params={"api-version":this.azureOpenAIApiVersion,...r.params}),this.caller.call(this.client.createChatCompletion.bind(this.client),e,r).then((e=>e.data))}_llmType(){return"openai"}}class A extends _{get lc_secrets(){return{promptLayerApiKey:"PROMPTLAYER_API_KEY"}}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=e?.plTags??[],this.returnPromptLayerId=e?.returnPromptLayerId??!1,this.promptLayerApiKey=e?.promptLayerApiKey??(0,l.lS)("PROMPTLAYER_API_KEY"),!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}async completionWithRetry(e,t){return e.stream?super.completionWithRetry(e,t):await super.completionWithRetry(e)}async _generate(e,t,r){let n;return{generations:await Promise.all(e.map((async e=>{const i=Date.now(),a=await this._call(e,t,r),s=Date.now();n=[{text:a}];const o={text:a},c=await(0,u.r)(this.caller,"langchain.PromptLayerOpenAIChat",[e],this._identifyingParams(),this.plTags,o,i,s,this.promptLayerApiKey);return!0===this.returnPromptLayerId&&!0===c.success&&(n[0].generationInfo={promptLayerRequestId:c.request_id}),n})))}}}class O extends w{static lc_name(){return"OpenAI"}get callKeys(){return[...super.callKeys,"options"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,t){if(e?.modelName?.startsWith("gpt-3.5-turbo")||e?.modelName?.startsWith("gpt-4")||e?.modelName?.startsWith("gpt-4-32k"))return new _(e,t);if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:256}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-davinci-003"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??(0,l.lS)("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??(0,l.lS)("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,l.lS)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiCompletionsDeploymentName||e?.azureOpenAIApiDeploymentName)??((0,l.lS)("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||(0,l.lS)("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??(0,l.lS)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,l.lS)("AZURE_OPENAI_BASE_PATH"),this.organization=e?.configuration?.organization??(0,l.lS)("OPENAI_ORGANIZATION"),this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.batchSize=e?.batchSize??this.batchSize,this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.maxTokens=e?.maxTokens??this.maxTokens,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.bestOf=e?.bestOf??this.bestOf,this.logitBias=e?.logitBias,this.stop=e?.stop,this.user=e?.user,this.streaming=e?.streaming??!1,this.streaming&&this.bestOf&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,...t,...e?.configuration}}invocationParams(e){return{model:this.modelName,temperature:this.temperature,max_tokens:this.maxTokens,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,best_of:this.bestOf,logit_bias:this.logitBias,stop:e?.stop??this.stop,user:this.user,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}async _generate(e,t,r){const n=c(e,this.batchSize),a=[],o={},l=this.invocationParams(t);if(-1===l.max_tokens){if(1!==e.length)throw new Error("max_tokens set to -1 not supported for multiple inputs");l.max_tokens=await(0,i.F1)({prompt:e[0],modelName:this.modelName})}for(let e=0;e<n.length;e+=1){const i=l.stream?await new Promise(((i,a)=>{const o=[];let c,u=!1,d=!1;this.completionWithRetry({...l,prompt:n[e]},{signal:t.signal,...t.options,adapter:s.Z,responseType:"stream",onmessage:e=>{if("[DONE]"===e.data?.trim?.()){if(d||u)return;d=!0,i({...c,choices:o})}else{const t=JSON.parse(e.data);if(t?.error){if(u)return;return u=!0,void a(t.error)}const n=t;c||(c={id:n.id,object:n.object,created:n.created,model:n.model});for(const e of n.choices)if(null!=e&&null!=e.index){o[e.index]||(o[e.index]={});const t=o[e.index];t.text=(t.text??"")+(e.text??""),t.finish_reason=e.finish_reason,t.logprobs=e.logprobs,r?.handleLLMNewToken(e.text??"",{prompt:Math.floor(e.index/this.n),completion:e.index%this.n})}d||u||!o.every((e=>null!=e.finish_reason))||(d=!0,i({...c,choices:o}))}}}).catch((e=>{u||(u=!0,a(e))}))})):await this.completionWithRetry({...l,prompt:n[e]},{signal:t.signal,...t.options});a.push(...i.choices);const{completion_tokens:c,prompt_tokens:u,total_tokens:d}=i.usage??{};c&&(o.completionTokens=(o.completionTokens??0)+c),u&&(o.promptTokens=(o.promptTokens??0)+u),d&&(o.totalTokens=(o.totalTokens??0)+d)}return{generations:c(a,this.n).map((e=>e.map((e=>({text:e.text??"",generationInfo:{finishReason:e.finish_reason,logprobs:e.logprobs}}))))),llmOutput:{tokenUsage:o}}}async*_streamResponseChunks(e,t,r){const n={...this.invocationParams(t),prompt:e,stream:!0},i=this.startStream(n,t);for await(const e of i){const t=JSON.parse(e),n=t.choices?.[0];if(!n)continue;const i=new a.b6({text:n.text,generationInfo:{finishReason:n.finish_reason,logprobs:n.logprobs}});yield i,r?.handleLLMNewToken(i.text??"")}}startStream(e,t){let r=!1;const n=new TransformStream,i=n.writable.getWriter(),a=(0,d.H)(n.readable);let o;return this.completionWithRetry(e,{...t,adapter:s.Z,responseType:"stream",onmessage:e=>{if(!r)if("[DONE]"===e.data?.trim?.())r=!0,i.close();else{const t=JSON.parse(e.data);if(t.error)throw r=!0,t.error;i.write(e.data)}}}).catch((e=>{r||(o=e,r=!0,i.close())})),{async next(){const e=await a.next();if(o)throw o;return e},[Symbol.asyncIterator](){return this}}}async completionWithRetry(e,t){if(!this.client){const e={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,basePath:this.clientConfig.basePath},t=(0,o.O)(e),r=new n.Configuration({...this.clientConfig,basePath:t,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new n.OpenAIApi(r)}const r={adapter:(0,l.UG)()?void 0:s.Z,...this.clientConfig.baseOptions,...t};return this.azureOpenAIApiKey&&(r.headers={"api-key":this.azureOpenAIApiKey,...r.headers},r.params={"api-version":this.azureOpenAIApiVersion,...r.params}),this.caller.call(this.client.createCompletion.bind(this.client),e,r).then((e=>e.data))}_llmType(){return"openai"}}class E extends O{get lc_secrets(){return{promptLayerApiKey:"PROMPTLAYER_API_KEY"}}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnPromptLayerId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=e?.plTags??[],this.promptLayerApiKey=e?.promptLayerApiKey??(0,l.lS)("PROMPTLAYER_API_KEY"),this.returnPromptLayerId=e?.returnPromptLayerId,!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}async completionWithRetry(e,t){return e.stream?super.completionWithRetry(e,t):await super.completionWithRetry(e)}async _generate(e,t,r){const n=Date.now(),i=await super._generate(e,t,r);for(let t=0;t<i.generations.length;t+=1){const r=Date.now(),a={text:i.generations[t][0].text,llm_output:i.llmOutput},s=await(0,u.r)(this.caller,"langchain.PromptLayerOpenAI",[e[t]],this._identifyingParams(),this.plTags,a,n,r,this.promptLayerApiKey);let o;!0===this.returnPromptLayerId&&(s&&!0===s.success&&(o=s.request_id),i.generations[t][0].generationInfo={...i.generations[t][0].generationInfo,promptLayerRequestId:o})}return i}}},2385:(e,t,r)=>{"use strict";r.d(t,{i:()=>l,j:()=>c});var n=r(2466);function i(e,t){return t?.[e]||n(e)}function a(e,t,r){const n={};for(const i in e)Object.hasOwn(e,i)&&(n[t(i,r)]=e[i]);return n}function s(e){return Array.isArray(e)?[...e]:{...e}}function o(e,t){const r=s(e);for(const[e,n]of Object.entries(t)){const[t,...i]=e.split(".").reverse();let a=r;for(const e of i.reverse()){if(void 0===a[e])break;a[e]=s(a[e]),a=a[e]}void 0!==a[t]&&(a[t]={lc:1,type:"secret",id:[n]})}return r}function c(e){const t=Object.getPrototypeOf(e);return"function"!=typeof e.lc_name||"function"==typeof t.lc_name&&e.lc_name()===t.lc_name()?e.name:e.lc_name()}r(3204);class l{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,c(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof l||"object"!=typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},r=Object.keys(this.lc_kwargs).reduce(((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e)),{});for(let n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n,"lc_aliases",this)),Object.assign(t,Reflect.get(n,"lc_secrets",this)),Object.assign(r,Reflect.get(n,"lc_attributes",this));for(const e in t)e in this&&void 0!==this[e]&&(r[e]=this[e]||r[e]);return{lc:1,type:"constructor",id:this.lc_id,kwargs:a(Object.keys(t).length?o(r,t):r,i,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}},7967:(e,t,r)=>{"use strict";function n(e,t="Human",r="AI"){const n=[];for(const i of e){let e;if("human"===i._getType())e=t;else if("ai"===i._getType())e=r;else if("system"===i._getType())e="System";else if("function"===i._getType())e="Function";else{if("generic"!==i._getType())throw new Error(`Got unsupported message type: ${i}`);e=i.role}const a=i.name?`${i.name}, `:"";n.push(`${e}: ${a}${i.content}`)}return n.join("\n")}r.d(t,{zs:()=>n})},5962:(e,t,r)=>{"use strict";r.d(t,{Al:()=>o,nw:()=>a});var n=r(6134),i=(r(2385),r(0));class a extends n.MJ{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts","base"]}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new n.xk(this.value)]}}class s extends i.eq{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const t=this.partialVariables??{},r={};for(const[e,n]of Object.entries(t))r[e]="string"==typeof n?n:await n();return{...r,...e}}async invoke(e,t){return this._callWithConfig((e=>this.formatPromptValue(e)),e,{...t,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await Promise.resolve().then(r.bind(r,6430));return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await Promise.resolve().then(r.bind(r,6430));return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await r.e(832).then(r.bind(r,2832));return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class o extends s{async formatPromptValue(e){const t=await this.format(e);return new a(t)}}},6430:(e,t,r)=>{"use strict";r.d(t,{PromptTemplate:()=>a});var n=r(5962),i=r(5738);class a extends n.Al{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),(0,i.af)(this.template,this.templateFormat,e)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return(0,i.SM)(this.template,this.templateFormat,t)}static fromExamples(e,t,r,n="\n\n",i=""){const s=[i,...e,t].join(n);return new a({inputVariables:r,template:s})}static fromTemplate(e,{templateFormat:t="f-string",...r}={}){const n=new Set;return(0,i.$M)(e,t).forEach((e=>{"variable"===e.type&&n.add(e.name)})),new a({inputVariables:[...n],templateFormat:t,template:e,...r})}async partial(e){const t=this.inputVariables.filter((t=>!(t in e))),r={...this.partialVariables??{},...e},n={...this,inputVariables:t,partialVariables:r};return new a(n)}serialize(){if(void 0!==this.outputParser)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new a({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}},5738:(e,t,r)=>{"use strict";r.d(t,{$M:()=>o,SM:()=>s,af:()=>c});const n=e=>{const t=e.split(""),r=[],n=(e,r)=>{for(let n=r;n<t.length;n+=1)if(e.includes(t[n]))return n;return-1};let i=0;for(;i<t.length;)if("{"===t[i]&&i+1<t.length&&"{"===t[i+1])r.push({type:"literal",text:"{"}),i+=2;else if("}"===t[i]&&i+1<t.length&&"}"===t[i+1])r.push({type:"literal",text:"}"}),i+=2;else if("{"===t[i]){const e=n("}",i);if(e<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:t.slice(i+1,e).join("")}),i=e+1}else{if("}"===t[i])throw new Error("Single '}' in template.");{const e=n("{}",i),a=(e<0?t.slice(i):t.slice(i,e)).join("");r.push({type:"literal",text:a}),i=e<0?t.length:e}}return r},i={"f-string":(e,t)=>n(e).reduce(((e,r)=>{if("variable"===r.type){if(r.name in t)return e+t[r.name];throw new Error(`Missing value for input ${r.name}`)}return e+r.text}),""),jinja2:(e,t)=>""},a={"f-string":n,jinja2:e=>[]},s=(e,t,r)=>i[t](e,r),o=(e,t)=>a[t](e),c=(e,t,r)=>{if(!(t in i)){const e=Object.keys(i);throw new Error(`Invalid template format. Got \`${t}\`;\n                         should be one of ${e}`)}try{const n=r.reduce(((e,t)=>(e[t]="foo",e)),{});s(e,t,n)}catch(e){throw new Error(`Invalid prompt schema: ${e.message}`)}}},6134:(e,t,r)=>{"use strict";r.d(t,{Cr:()=>f,GC:()=>d,H2:()=>w,HD:()=>g,J:()=>m,Ls:()=>b,MJ:()=>y,WH:()=>i,b6:()=>a,gY:()=>u,jN:()=>h,ro:()=>l,xk:()=>c,xq:()=>p});var n=r(2385);const i="__run";class a{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new a({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class s extends n.i{get text(){return this.content}constructor(e,t){"string"==typeof e&&(e={content:e,additional_kwargs:t}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}}class o extends s{static _mergeAdditionalKwargs(e,t){const r={...e};for(const[e,n]of Object.entries(t))if(void 0===r[e])r[e]=n;else{if(typeof r[e]!=typeof n)throw new Error(`additional_kwargs[${e}] already exists in the message chunk, but with a different type.`);if("string"==typeof r[e])r[e]=r[e]+n;else{if(Array.isArray(r[e])||"object"!=typeof r[e])throw new Error(`additional_kwargs[${e}] already exists in this message chunk.`);r[e]=this._mergeAdditionalKwargs(r[e],n)}}return r}}class c extends s{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class l extends o{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new l({content:this.content+e.content,additional_kwargs:l._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class u extends s{static lc_name(){return"AIMessage"}_getType(){return"ai"}}class d extends o{static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){return new d({content:this.content+e.content,additional_kwargs:d._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class h extends s{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class p extends o{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new p({content:this.content+e.content,additional_kwargs:p._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class f extends o{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new f({content:this.content+e.content,additional_kwargs:f._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:this.name??""})}}class m extends s{static lc_name(){return"ChatMessage"}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return"generic"===e._getType()}}class g extends o{static lc_name(){return"ChatMessageChunk"}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new g({content:this.content+e.content,additional_kwargs:g._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}}class b extends a{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new b({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}class y extends n.i{}class w{}},0:(e,t,r)=>{"use strict";r.d(t,{eq:()=>o});var n=r(2671),i=r(2385),a=r(1858);function s(e,t){return e&&!Array.isArray(e)&&"object"==typeof e?e:{[t]:e}}class o extends i.i{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}bind(e){return new d({bound:this,kwargs:e})}withFallbacks(e){return new h({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e,t=0){if(Array.isArray(e)){if(e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);return e}return Array.from({length:t},(()=>e))}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),i=r?.maxConcurrency&&r.maxConcurrency>0?r?.maxConcurrency:e.length,a=[];for(let t=0;t<e.length;t+=i){const r=e.slice(t,t+i).map(((e,t)=>this.invoke(e,n[t]))),s=await Promise.all(r);a.push(s)}return a.flat()}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){return a.Q.fromAsyncGenerator(this._streamIterator(e,t))}_separateRunnableConfigFromCallOptions(e={}){const t={callbacks:e.callbacks,tags:e.tags,metadata:e.metadata},r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,[t,r]}async _callWithConfig(e,t,r){const i=await n.Ye.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata),a=await(i?.handleChainStart(this.toJSON(),s(t,"input"),void 0,r?.runType));let o;try{o=await e.bind(this)(t)}catch(e){throw await(a?.handleChainError(e)),e}return await(a?.handleChainEnd(s(o,"output"))),o}async*_streamWithConfig(e,t){const r=await n.Ye.configure(t?.callbacks,void 0,t?.tags,void 0,t?.metadata),i=await(r?.handleChainStart(this.toJSON(),s("<streamed value>","input"),void 0,t?.runType));let a,o=!0;try{for await(const t of e)if(yield t,o)if(void 0===a)a=t;else try{a=a.concat(t)}catch(e){a=void 0,o=!1}}catch(e){throw await(i?.handleChainError(e)),e}await(i?.handleChainEnd(s(a,"output")))}_patchConfig(e={},t=void 0){return{...e,callbacks:t}}pipe(e){return new c({first:this,last:p(e)})}static isRunnable(e){return e.lc_runnable}}class c extends o{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){const r=await n.Ye.configure(t?.callbacks,void 0,t?.tags,void 0,t?.metadata),i=await(r?.handleChainStart(this.toJSON(),s(e,"input")));let a,o=e;try{for(const e of[this.first,...this.middle])o=await e.invoke(o,this._patchConfig(t,i?.getChild()));a=await this.last.invoke(o,this._patchConfig(t,i?.getChild()))}catch(e){throw await(i?.handleChainError(e)),e}return await(i?.handleChainEnd(s(a,"output"))),a}async batch(e,t,r){const i=this._getOptionsList(t??{},e.length),a=await Promise.all(i.map((e=>n.Ye.configure(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)))),o=await Promise.all(a.map(((t,r)=>t?.handleChainStart(this.toJSON(),s(e[r],"input")))));let c,l=e;try{for(let e=0;e<[this.first,...this.middle].length;e+=1){const t=this.steps[e];l=await t.batch(l,o.map(((e,t)=>this._patchConfig(i[t],e?.getChild()))),r)}c=await this.last.batch(l,o.map((e=>this._patchConfig(i[this.steps.length-1],e?.getChild()))),r)}catch(e){throw await Promise.all(o.map((t=>t?.handleChainError(e)))),e}return await Promise.all(o.map(((e,t)=>e?.handleChainEnd(s(c[t],"output"))))),c}async*_streamIterator(e,t){const r=await n.Ye.configure(t?.callbacks,void 0,t?.tags,void 0,t?.metadata),i=await(r?.handleChainStart(this.toJSON(),s(e,"input")));let a=e;const o=[this.first,...this.middle,this.last],c=o.length-[...o].reverse().findIndex((e=>"function"!=typeof e.transform))-1;try{for(const e of o.slice(0,c))a=await e.invoke(a,this._patchConfig(t,i?.getChild()))}catch(e){throw await(i?.handleChainError(e)),e}let l,u=!0;try{let e=await o[c]._streamIterator(a,this._patchConfig(t,i?.getChild()));for(const r of o.slice(c+1))e=await r.transform(e,this._patchConfig(t,i?.getChild()));for await(const t of e)if(yield t,u)if(void 0===l)l=t;else try{l=l.concat(t)}catch(e){l=void 0,u=!1}}catch(e){throw await(i?.handleChainError(e)),e}await(i?.handleChainEnd(s(l,"output")))}pipe(e){return c.isRunnableSequence(e)?new c({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last}):new c({first:this.first,middle:[...this.middle,this.last],last:p(e)})}static isRunnableSequence(e){return Array.isArray(e.middle)&&o.isRunnable(e)}static from([e,...t]){return new c({first:p(e),middle:t.slice(0,-1).map(p),last:p(t[t.length-1])})}}class l extends o{static lc_name(){return"RunnableMap"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,r]of Object.entries(e.steps))this.steps[t]=p(r)}async invoke(e,t){const r=await n.Ye.configure(t?.callbacks,void 0,t?.tags,void 0,t?.metadata),i=await(r?.handleChainStart(this.toJSON(),{input:e})),a={};try{for(const[r,n]of Object.entries(this.steps)){const s=await n.invoke(e,this._patchConfig(t,i?.getChild()));a[r]=s}}catch(e){throw await(i?.handleChainError(e)),e}return await(i?.handleChainEnd(a)),a}}class u extends o{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}async invoke(e,t){return this._callWithConfig((async e=>this.func(e)),e,t)}}class d extends o{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs}bind(e){return new d({bound:this.bound,kwargs:{...this.kwargs,...e}})}async invoke(e,t){return this.bound.invoke(e,{...t,...this.kwargs})}async batch(e,t,r){const n=Array.isArray(t)?t.map((e=>({...e,...this.kwargs}))):{...t,...this.kwargs};return this.bound.batch(e,n,r)}async stream(e,t){return this.bound.stream(e,{...t,...this.kwargs})}}class h extends o{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","schema","runnable"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const r=await n.Ye.configure(t?.callbacks,void 0,t?.tags,void 0,t?.metadata),i=await(r?.handleChainStart(this.toJSON(),s(e,"input")));let a;for(const r of this.runnables())try{const n=await r.invoke(e,this._patchConfig(t,i?.getChild()));return await(i?.handleChainEnd(s(n,"output"))),n}catch(e){void 0===a&&(a=e)}if(void 0===a)throw new Error("No error stored at end of fallback.");throw await(i?.handleChainError(a)),a}async batch(e,t,r){const i=this._getOptionsList(t??{},e.length),a=await Promise.all(i.map((e=>n.Ye.configure(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)))),o=await Promise.all(a.map(((t,r)=>t?.handleChainStart(this.toJSON(),s(e[r],"input")))));let c;for(const t of this.runnables())try{const n=await t.batch(e,o.map(((e,t)=>this._patchConfig(i[t],e?.getChild()))),r);return await Promise.all(o.map(((e,t)=>e?.handleChainEnd(s(n[t],"output"))))),n}catch(e){void 0===c&&(c=e)}if(!c)throw new Error("No error stored at end of fallbacks.");throw await Promise.all(o.map((e=>e?.handleChainError(c)))),c}}function p(e){if("function"==typeof e)return new u({func:e});if(o.isRunnable(e))return e;if(Array.isArray(e)||"object"!=typeof e)throw new Error("Expected a Runnable, function or object.\nInstead got an unsupported type.");{const t={};for(const[r,n]of Object.entries(e))t[r]=p(n);return new l({steps:t})}}},803:(e,t,r)=>{"use strict";r.d(t,{L:()=>s});var n=r(2693),i=r(5860);const a=[400,401,403,404,405,406,407,408,409];class s{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t=i.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add((()=>n((()=>e(...t).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response?.status;if(t&&a.includes(+t))throw e;const r=e?.response?.data;if("insufficient_quota"===r?.error?.code){const e=new Error(r?.error?.message);throw e.name="InsufficientQuotaError",e}},retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise(((t,r)=>{e.signal?.addEventListener("abort",(()=>{r(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(...e){return this.call((()=>fetch(...e).then((e=>e.ok?e:Promise.reject(e)))))}}},566:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(9669);const i="text/event-stream";function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function s(e){return Array.isArray(e)}function o(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}async function c(e){const t=function(e){const t=new Headers(e.headers);if(e.auth){const r=e.auth.username||"",n=e.auth.password?decodeURI(encodeURIComponent(e.auth.password)):"";t.set("Authorization",`Basic ${btoa(`${r}:${n}`)}`)}const r=e.method.toUpperCase(),n={headers:t,method:r};var c;"GET"!==r&&"HEAD"!==r&&(n.body=e.data,c=n.body,"[object FormData]"===toString.call(c)&&("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document&&t.delete("Content-Type")),"string"==typeof n.body&&(n.body=(new TextEncoder).encode(n.body)),e.mode&&(n.mode=e.mode),e.cache&&(n.cache=e.cache),e.integrity&&(n.integrity=e.integrity),e.redirect&&(n.redirect=e.redirect),e.referrer&&(n.referrer=e.referrer),e.timeout&&e.timeout>0&&(n.signal=AbortSignal.timeout(e.timeout)),e.signal&&(n.signal=e.signal),function(e){return void 0===e}(e.withCredentials)||(n.credentials=e.withCredentials?"include":"omit"),"stream"===e.responseType&&n.headers.set("Accept",i);const l=function(e,t,r){if(!t)return e;var n,i;if(r)n=r(t);else if(i=t,"[object URLSearchParams]"===toString.call(i))n=t.toString();else{var c=[];o(t,(function(e,t){null!=e&&(s(e)?t=`${t}[]`:e=[e],o(e,(function(e){!function(e){return"[object Date]"===toString.call(e)}(e)?function(e){return null!==e&&"object"==typeof e}(e)&&(e=JSON.stringify(e)):e=e.toISOString(),c.push(`${a(t)}=${a(e)}`)})))})),n=c.join("&")}if(n){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}((u=e.baseURL,d=e.url,u&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(d)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,d):d),e.params,e.paramsSerializer);var u,d;return new Request(l,n)}(e),r=await async function(e,t){let r;try{r=await fetch(e)}catch(r){return r&&"AbortError"===r.name?l("Request aborted",t,"ECONNABORTED",e):r&&"TimeoutError"===r.name?l("Request timeout",t,"ECONNABORTED",e):l("Network Error",t,"ERR_NETWORK",e)}const n={};r.headers.forEach(((e,t)=>{n[t]=e}));const a={ok:r.ok,status:r.status,statusText:r.statusText,headers:n,config:t,request:e};if(r.status>=200&&204!==r.status)if("stream"===t.responseType){const e=r.headers.get("content-type");if(!e?.startsWith(i)){if(r.status>=400)return e?.startsWith("application/json")?(a.data=await r.json(),a):(a.data=await r.text(),a);throw new Error(`Expected content-type to be ${i}, Actual: ${e}`)}await async function(e,t){if(null!=(r=e)&&"object"==typeof r&&"on"in r)return new Promise((r=>{e.on("readable",(()=>{let n;for(;;){if(n=e.read(),null==n){t(new Uint8Array,!0);break}t(n)}r()}))}));var r;const n=e.getReader();for(;;){const e=await n.read();if(e.done){t(new Uint8Array,!0);break}t(e.value)}}(r.body,function(e){let t,r,n,i=!1;return function(a,s){if(s)return void e(a,0,!0);void 0===t?(t=a,r=0,n=-1):t=function(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(t,a);const o=t.length;let c=0;for(;r<o;){i&&(10===t[r]&&(c=++r),i=!1);let a=-1;for(;r<o&&-1===a;++r)switch(t[r]){case 58:-1===n&&(n=r-c);break;case 13:i=!0;case 10:a=r}if(-1===a)break;e(t.subarray(c,a),n),c=r,n=-1}c===o?t=void 0:0!==c&&(t=t.subarray(c),r-=c)}}(function(e,t,r){let n={data:"",event:"",id:"",retry:void 0};const i=new TextDecoder;return function(a,s,o){if(o)(function(e){return""===e.data&&""===e.event&&""===e.id&&void 0===e.retry})(n)||(e?.(n),n={data:"",event:"",id:"",retry:void 0});else if(0===a.length)e?.(n),n={data:"",event:"",id:"",retry:void 0};else if(s>0){const e=i.decode(a.subarray(0,s)),o=s+(32===a[s+1]?2:1),c=i.decode(a.subarray(o));switch(e){case"data":n.data=n.data?n.data+"\n"+c:c;break;case"event":n.event=c;break;case"id":t?.(n.id=c);break;case"retry":{const e=parseInt(c,10);Number.isNaN(e)||r?.(n.retry=e);break}}}}}(t.onmessage)))}else switch(t.responseType){case"arraybuffer":a.data=await r.arrayBuffer();break;case"blob":a.data=await r.blob();break;case"json":a.data=await r.json();break;case"formData":a.data=await r.formData();break;default:a.data=await r.text()}return a}(t,e);return new Promise(((t,n)=>{r instanceof Error?n(r):"[object Function]"===Object.prototype.toString.call(e.settle)?e.settle(t,n,r):function(e,t,r){const{validateStatus:n}=r.config;r.status&&n&&!n(r.status)?t(l(`Request failed with status code ${r.status} and body ${"string"==typeof r.data?r.data:function(e){try{return JSON.stringify(e)}catch(t){return e}}(r.data)}`,r.config,null,r.request,r)):e(r)}(t,n,r)}))}function l(e,t,r,i,a){return n.AxiosError&&"function"==typeof n.AxiosError?new n.AxiosError(e,n.AxiosError[r],t,i,a):function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}(new Error(e),t,r,i,a)}},3153:(e,t,r)=>{"use strict";function n(e){const{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,basePath:a}=e;if(n&&i&&t)return`${i}/${t}`;if(n){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${t}`}return a}r.d(t,{O:()=>n})},5606:(e,t,r)=>{"use strict";r.d(t,{UG:()=>i,lS:()=>c,sA:()=>o});const n=()=>"undefined"!=typeof Deno,i=()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node&&!n(),a=()=>{let e;return e="undefined"!=typeof window&&void 0!==window.document?"browser":i()?"node":"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":n()?"deno":"other",e};let s;async function o(){if(void 0===s){const e=a();s={library:"langchain-js",runtime:e}}return s}function c(e){try{return"undefined"!=typeof process?process.env?.[e]:void 0}catch(e){return}}},3551:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});const n=async(e,t,r,n,i,a,s,o,c)=>(await e.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:t,provider:"langchain",args:r,kwargs:n,tags:i,request_response:a,request_start_time:Math.floor(s/1e3),request_end_time:Math.floor(o/1e3),api_key:c})})).json()},1858:(e,t,r)=>{"use strict";function n(e,t=!1){if(e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();const r=e.getReader();return{async next(){try{const e=await r.read();return e.done&&r.releaseLock(),e}catch(e){throw r.releaseLock(),e}},async return(){if(t)r.releaseLock();else{const e=r.cancel();r.releaseLock(),await e}return{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}r.d(t,{H:()=>n,Q:()=>i});class i extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done&&this.reader.releaseLock(),e}catch(e){throw this.reader.releaseLock(),e}}async return(){this.ensureReader();const e=this.reader.cancel();return this.reader.releaseLock(),await e,{done:!0,value:void 0}}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const t=e.getReader();return new i({start:e=>function r(){return t.read().then((({done:t,value:n})=>{if(!t)return e.enqueue(n),r();e.close()}))}()})}static fromAsyncGenerator(e){return new i({async pull(t){const{value:r,done:n}=await e.next();n?t.close():r&&t.enqueue(r)}})}}},8186:(e,t,r)=>{"use strict";r.d(t,{b:()=>h});var n=Object.defineProperty,i=r(9742);function a(e,t){return 1===e.length?[t.get(e.join(","))]:function(e,t){let r=Array.from({length:e.length},((e,t)=>({start:t,end:t+1})));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){const a=e.slice(r[i].start,r[i+1].end),s=t.get(a.join(","));null!=s&&(null==n||s<n[0])&&(n=[s,i])}if(null==n)break;{const e=n[1];r[e]={start:r[e].start,end:r[e+1].end},r.splice(e+1,1)}}return r}(e,t).map((r=>t.get(e.slice(r.start,r.end).join(",")))).filter((e=>null!=e))}var s,o=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){this.patStr=e.pat_str;const r=e.bpe_ranks.split("\n").filter(Boolean).reduce(((e,t)=>{const[r,n,...i]=t.split(" "),a=Number.parseInt(n,10);return i.forEach(((t,r)=>e[t]=a+r)),e}),{});for(const[e,t]of Object.entries(r)){const r=i.toByteArray(e);this.rankMap.set(r.join(","),t),this.textMap.set(t,r)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce(((e,[t,r])=>(e[r]=this.textEncoder.encode(t),e)),{})}encode(e,t=[],r="all"){const n=new RegExp(this.patStr,"ug"),i=o.specialTokenRegex(Object.keys(this.specialTokens)),s=[],c=new Set("all"===t?Object.keys(this.specialTokens):t),l=new Set("all"===r?Object.keys(this.specialTokens).filter((e=>!c.has(e))):r);if(l.size>0){const t=o.specialTokenRegex([...l]),r=e.match(t);if(null!=r)throw new Error(`The text contains a special token that is not allowed: ${r[0]}`)}let u=0;for(;;){let t=null,r=u;for(;i.lastIndex=r,t=i.exec(e),null!=t&&!c.has(t[0]);)r=t.index+1;const o=t?.index??e.length;for(const t of e.substring(u,o).matchAll(n)){const e=this.textEncoder.encode(t[0]),r=this.rankMap.get(e.join(","));null==r?s.push(...a(e,this.rankMap)):s.push(r)}if(null==t)break;let l=this.specialTokens[t[0]];s.push(l),u=t.index+t[0].length}return s}decode(e){const t=[];let r=0;for(let n=0;n<e.length;++n){const i=e[n],a=this.textMap.get(i)??this.inverseSpecialTokens[i];null!=a&&(t.push(a),r+=a.length)}const n=new Uint8Array(r);let i=0;for(const e of t)n.set(e,i),i+=e.length;return this.textDecoder.decode(n)}},c=o;((e,t,r)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(c,"symbol"!=typeof(s="specialTokenRegex")?s+"":s,(e=>new RegExp(e.map((e=>e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"))).join("|"),"g")));var l=r(803);const u={},d=new l.L({});async function h(e,t){return async function(e,t){return e in u||(u[e]=d.fetch(`https://tiktoken.pages.dev/js/${e}.json`,{signal:t?.signal}).then((e=>e.json())).catch((t=>{throw delete u[e],t}))),new c(await u[e],t?.extendedSpecialTokens)}(function(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}(e),t)}},2811:e=>{"use strict";e.exports=JSON.parse('{"name":"openai","version":"3.3.0","description":"Node.js library for the OpenAI API","repository":{"type":"git","url":"git@github.com:openai/openai-node.git"},"keywords":["openai","open","ai","gpt-3","gpt3"],"author":"OpenAI","license":"MIT","main":"./dist/index.js","types":"./dist/index.d.ts","scripts":{"build":"tsc --outDir dist/"},"dependencies":{"axios":"^0.26.0","form-data":"^4.0.0"},"devDependencies":{"@types/node":"^12.11.5","typescript":"^3.6.4"}}')}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".bundle.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},n.l=(t,r,i,a)=>{if(e[t])e[t].push(r);else{var s,o;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")=="js:"+i){s=u;break}}s||(o=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack","js:"+i),s.src=t),e[t]=[r];var d=(r,n)=>{s.onerror=s.onload=null,clearTimeout(h);var i=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),r)return r(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),o&&document.head.appendChild(s)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&!e;)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((r,n)=>i=e[t]=[r,n]));r.push(i[2]=a);var s=n.p+n.u(t),o=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,a,[s,o,c]=r,l=0;if(s.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);c&&c(n)}for(t&&t(r);l<s.length;l++)a=s[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkjs=self.webpackChunkjs||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(1763);console.log("Imported OpenAI"),window.displayMessage=async function(){const t=document.getElementById("message");t.textContent="Running predict...";const r=document.getElementById("openai_key").value,n=new e.OpenAI({openAIApiKey:r,temperature:.9});console.log("Calling predict");const i=await n.predict("What would be a good company name for a company that makes colorful socks?");console.log(i),t.textContent=i}})()})();